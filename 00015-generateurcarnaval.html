<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√©n√©rateur Carnaval & Festivit√©s</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }

        .section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.3rem;
            color: #764ba2;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
        }

        .card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 10px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
            font-size: 0.9rem;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .card.active {
            border-color: #f5576c;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            box-shadow: 0 10px 30px rgba(245, 87, 108, 0.4);
        }

        .icon {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .prompt-box {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            min-height: 200px;
            font-size: 1.05rem;
            line-height: 1.8;
            color: #333;
            position: sticky;
            top: 20px;
        }

        .buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
            color: white;
        }

        .custom-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            margin-bottom: 10px;
        }

        .custom-input:focus {
            outline: none;
            border-color: #764ba2;
        }

        .toggle-btn {
            background: #e9ecef;
            color: #333;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .toggle-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .custom-section {
            display: none;
        }

        .custom-section.active {
            display: block;
        }

        @media (max-width: 968px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üé≠ G√©n√©rateur Carnaval & Festivit√©s</h1>
            <p class="subtitle">Cr√©ez des sc√®nes festives vibrantes et color√©es</p>
        </header>

        <div class="content">
            <!-- CONTR√îLES -->
            <div class="controls">
                
                <!-- PERSONNAGE PRINCIPAL -->
                <div class="section">
                    <h3 class="section-title">üë§ Personnage Principal</h3>
                    <div class="grid" id="character1-grid"></div>
                </div>

                <!-- NATIONALIT√â -->
                <div class="section">
                    <h3 class="section-title">üåç Nationalit√©</h3>
                    <button class="toggle-btn active" onclick="toggleMode('nationality')">Pr√©d√©fini</button>
                    <button class="toggle-btn" onclick="toggleMode('nationality')">Personnalis√©</button>
                    
                    <div id="nationality-predefined" class="custom-section active">
                        <div class="grid" id="nationality-grid"></div>
                    </div>
                    
                    <div id="nationality-custom" class="custom-section">
                        <input type="text" class="custom-input" id="custom-nationality" 
                               placeholder="Ex: Colombienne, Japonaise, Espagnole..." 
                               oninput="generatePrompt()">
                    </div>
                </div>

                <!-- TENUE -->
                <div class="section">
                    <h3 class="section-title">üëó Tenue</h3>
                    <div class="grid" id="outfit-grid"></div>
                </div>

                <!-- VILLE -->
                <div class="section">
                    <h3 class="section-title">üèôÔ∏è Ville</h3>
                    <button class="toggle-btn active" onclick="toggleMode('city')">Pr√©d√©fini</button>
                    <button class="toggle-btn" onclick="toggleMode('city')">Personnalis√©</button>
                    
                    <div id="city-predefined" class="custom-section active">
                        <div class="grid" id="city-grid"></div>
                    </div>
                    
                    <div id="city-custom" class="custom-section">
                        <input type="text" class="custom-input" id="custom-city" 
                               placeholder="Ex: Paris, Tokyo, Barcelone..." 
                               oninput="generatePrompt()">
                    </div>
                </div>

                <!-- √âV√âNEMENT -->
                <div class="section">
                    <h3 class="section-title">üéâ √âv√©nement</h3>
                    <button class="toggle-btn active" onclick="toggleMode('event')">Pr√©d√©fini</button>
                    <button class="toggle-btn" onclick="toggleMode('event')">Personnalis√©</button>
                    
                    <div id="event-predefined" class="custom-section active">
                        <div class="grid" id="event-grid"></div>
                    </div>
                    
                    <div id="event-custom" class="custom-section">
                        <input type="text" class="custom-input" id="custom-event" 
                               placeholder="Ex: Festival de musique, D√©fil√© de mode..." 
                               oninput="generatePrompt()">
                    </div>
                </div>

                <!-- PERSONNAGE SECONDAIRE -->
                <div class="section">
                    <h3 class="section-title">üë• Personnage Secondaire (optionnel)</h3>
                    <div class="grid" id="character2-grid"></div>
                </div>

                <!-- OPTIONS PERSONNAGE SECONDAIRE -->
                <div id="secondary-options" style="display: none;">
                    
                    <!-- NATIONALIT√â SECONDAIRE -->
                    <div class="section">
                        <h3 class="section-title">üåç Nationalit√© (Personnage 2)</h3>
                        <button class="toggle-btn active" onclick="toggleMode('nationality2')">Pr√©d√©fini</button>
                        <button class="toggle-btn" onclick="toggleMode('nationality2')">Personnalis√©</button>
                        
                        <div id="nationality2-predefined" class="custom-section active">
                            <div class="grid" id="nationality2-grid"></div>
                        </div>
                        
                        <div id="nationality2-custom" class="custom-section">
                            <input type="text" class="custom-input" id="custom-nationality2" 
                                   placeholder="Ex: Colombienne, Japonaise, Espagnole..." 
                                   oninput="generatePrompt()">
                        </div>
                    </div>

                    <!-- TENUE SECONDAIRE -->
                    <div class="section">
                        <h3 class="section-title">üëó Tenue (Personnage 2)</h3>
                        <div class="grid" id="outfit2-grid"></div>
                    </div>

                    <!-- COIFFURE SECONDAIRE -->
                    <div class="section">
                        <h3 class="section-title">üíá Coiffure (Personnage 2)</h3>
                        <button class="toggle-btn active" onclick="toggleMode('hairstyle2')">Pr√©d√©fini</button>
                        <button class="toggle-btn" onclick="toggleMode('hairstyle2')">Personnalis√©</button>
                        
                        <div id="hairstyle2-predefined" class="custom-section active">
                            <div class="grid" id="hairstyle2-grid"></div>
                        </div>
                        
                        <div id="hairstyle2-custom" class="custom-section">
                            <input type="text" class="custom-input" id="custom-hairstyle2" 
                                   placeholder="Ex: cheveux longs ondul√©s, mohawk..." 
                                   oninput="generatePrompt()">
                        </div>
                    </div>

                    <!-- MAQUILLAGE & ACCESSOIRES SECONDAIRE -->
                    <div class="section">
                        <h3 class="section-title">üíé Maquillage & Accessoires (Personnage 2)</h3>
                        <button class="toggle-btn active" onclick="toggleMode('makeup2')">Pr√©d√©fini</button>
                        <button class="toggle-btn" onclick="toggleMode('makeup2')">Personnalis√©</button>
                        
                        <div id="makeup2-predefined" class="custom-section active">
                            <div class="grid" id="makeup2-grid"></div>
                        </div>
                        
                        <div id="makeup2-custom" class="custom-section">
                            <input type="text" class="custom-input" id="custom-makeup2" 
                                   placeholder="Ex: tatouages temporaires, bijoux dor√©s..." 
                                   oninput="generatePrompt()">
                        </div>
                    </div>

                    <!-- EXPRESSION SECONDAIRE -->
                    <div class="section">
                        <h3 class="section-title">üòä Expression (Personnage 2)</h3>
                        <div class="grid" id="expression2-grid"></div>
                    </div>

                </div>

                <!-- ACTION -->
                <div class="section">
                    <h3 class="section-title">üé¨ Action</h3>
                    <button class="toggle-btn active" onclick="toggleMode('action')">Pr√©d√©fini</button>
                    <button class="toggle-btn" onclick="toggleMode('action')">Personnalis√©</button>
                    
                    <div id="action-predefined" class="custom-section active">
                        <div class="grid" id="action-grid"></div>
                    </div>
                    
                    <div id="action-custom" class="custom-section">
                        <input type="text" class="custom-input" id="custom-action" 
                               placeholder="Ex: danse sensuellement, pose pour la cam√©ra..." 
                               oninput="generatePrompt()">
                    </div>
                </div>

                <!-- INTERACTION -->
                <div class="section" id="interaction-section" style="display: none;">
                    <h3 class="section-title">üíï Interaction</h3>
                    <div class="grid" id="interaction-grid"></div>
                </div>

                <!-- MAQUILLAGE & ACCESSOIRES -->
                <div class="section">
                    <h3 class="section-title">üíé Maquillage & Accessoires</h3>
                    <button class="toggle-btn active" onclick="toggleMode('makeup')">Pr√©d√©fini</button>
                    <button class="toggle-btn" onclick="toggleMode('makeup')">Personnalis√©</button>
                    
                    <div id="makeup-predefined" class="custom-section active">
                        <div class="grid" id="makeup-grid"></div>
                    </div>
                    
                    <div id="makeup-custom" class="custom-section">
                        <input type="text" class="custom-input" id="custom-makeup" 
                               placeholder="Ex: tatouages temporaires, bijoux dor√©s..." 
                               oninput="generatePrompt()">
                    </div>
                </div>

                <!-- COIFFURE -->
                <div class="section">
                    <h3 class="section-title">üíá Coiffure</h3>
                    <button class="toggle-btn active" onclick="toggleMode('hairstyle')">Pr√©d√©fini</button>
                    <button class="toggle-btn" onclick="toggleMode('hairstyle')">Personnalis√©</button>
                    
                    <div id="hairstyle-predefined" class="custom-section active">
                        <div class="grid" id="hairstyle-grid"></div>
                    </div>
                    
                    <div id="hairstyle-custom" class="custom-section">
                        <input type="text" class="custom-input" id="custom-hairstyle" 
                               placeholder="Ex: undercut stylis√©, mohawk color√©..." 
                               oninput="generatePrompt()">
                    </div>
                </div>

                <!-- MOMENT -->
                <div class="section">
                    <h3 class="section-title">‚è∞ Moment de la journ√©e</h3>
                    <div class="grid" id="moment-grid"></div>
                </div>

                <!-- M√âT√âO -->
                <div class="section">
                    <h3 class="section-title">üå§Ô∏è M√©t√©o</h3>
                    <div class="grid" id="weather-grid"></div>
                </div>

                <!-- EXPRESSION -->
                <div class="section">
                    <h3 class="section-title">üòä Expression</h3>
                    <div class="grid" id="expression-grid"></div>
                </div>

                <!-- ARRI√àRE-PLAN -->
                <div class="section">
                    <h3 class="section-title">üé™ Arri√®re-plan</h3>
                    <button class="toggle-btn active" onclick="toggleMode('background')">Pr√©d√©fini</button>
                    <button class="toggle-btn" onclick="toggleMode('background')">Personnalis√©</button>
                    
                    <div id="background-predefined" class="custom-section active">
                        <div class="grid" id="background-grid"></div>
                    </div>
                    
                    <div id="background-custom" class="custom-section">
                        <input type="text" class="custom-input" id="custom-background" 
                               placeholder="Ex: graffitis color√©s, fontaine illumin√©e..." 
                               oninput="generatePrompt()">
                    </div>
                </div>

                <!-- EFFETS SP√âCIAUX -->
                <div class="section">
                    <h3 class="section-title">‚ú® Effets sp√©ciaux</h3>
                    <button class="toggle-btn active" onclick="toggleMode('effects')">Pr√©d√©fini</button>
                    <button class="toggle-btn" onclick="toggleMode('effects')">Personnalis√©</button>
                    
                    <div id="effects-predefined" class="custom-section active">
                        <div class="grid" id="effects-grid"></div>
                    </div>
                    
                    <div id="effects-custom" class="custom-section">
                        <input type="text" class="custom-input" id="custom-effects" 
                               placeholder="Ex: √©tincelles dor√©es, n√©ons r√©fl√©chis..." 
                               oninput="generatePrompt()">
                    </div>
                </div>

                <!-- ESTH√âTIQUE -->
                <div class="section">
                    <h3 class="section-title">üé® Esth√©tique</h3>
                    <button class="toggle-btn active" onclick="toggleMode('aesthetic')">Pr√©d√©fini</button>
                    <button class="toggle-btn" onclick="toggleMode('aesthetic')">Personnalis√©</button>
                    
                    <div id="aesthetic-predefined" class="custom-section active">
                        <div class="grid" id="aesthetic-grid"></div>
                    </div>
                    
                    <div id="aesthetic-custom" class="custom-section">
                        <input type="text" class="custom-input" id="custom-aesthetic" 
                               placeholder="Ex: tons pastels, palette n√©on, vintage warm..." 
                               oninput="generatePrompt()">
                    </div>
                </div>

                <!-- CADRAGE -->
                <div class="section">
                    <h3 class="section-title">üì∑ Cadrage</h3>
                    <button class="toggle-btn active" onclick="toggleMode('framing')">Pr√©d√©fini</button>
                    <button class="toggle-btn" onclick="toggleMode('framing')">Personnalis√©</button>
                    
                    <div id="framing-predefined" class="custom-section active">
                        <div class="grid" id="framing-grid"></div>
                    </div>
                    
                    <div id="framing-custom" class="custom-section">
                        <input type="text" class="custom-input" id="custom-framing" 
                               placeholder="Ex: plan rapproch√© dynamique, vue en contre-plong√©e..." 
                               oninput="generatePrompt()">
                    </div>
                </div>

                <!-- AMBIANCE -->
                <div class="section">
                    <h3 class="section-title">‚ú® Ambiance</h3>
                    <div class="grid" id="ambiance-grid"></div>
                </div>

                <!-- STYLE -->
                <div class="section">
                    <h3 class="section-title">üé® Style Photo</h3>
                    <div class="grid" id="style-grid"></div>
                </div>

            </div>

            <!-- R√âSULTAT -->
            <div class="result">
                <div class="section">
                    <h3 class="section-title">üìù Prompt G√©n√©r√©</h3>
                    <div class="prompt-box" id="prompt">
                        S√©lectionnez des options pour g√©n√©rer votre prompt...
                    </div>
                    
                    <div class="buttons">
                        <button class="btn btn-primary" onclick="generatePrompt()">
                            üîÑ R√©g√©n√©rer
                        </button>
                        <button class="btn btn-secondary" onclick="randomize()">
                            üé≤ Al√©atoire
                        </button>
                        <button class="btn btn-success" onclick="copyPrompt()">
                            üìã Copier
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const data = {
            character1: [
                { id: 'woman', name: 'Femme', icon: 'üë©' },
                { id: 'man', name: 'Homme', icon: 'üë®' }
            ],
            nationalities: [
                { id: 'algerian', name: 'Alg√©rienne' },
                { id: 'american', name: 'Am√©ricaine' },
                { id: 'antarctic', name: 'Chercheur en Antarctique' },
                { id: 'argentinian', name: 'Argentine' },
                { id: 'australian', name: 'Australienne' },
                { id: 'austrian', name: 'Autrichienne' },
                { id: 'belgian', name: 'Belge' },
                { id: 'brazilian', name: 'Br√©silienne' },
                { id: 'british', name: 'Britannique' },
                { id: 'canadian', name: 'Canadienne' },
                { id: 'caribbean', name: 'Cara√Øb√©enne' },
                { id: 'chilean', name: 'Chilienne' },
                { id: 'chinese', name: 'Chinoise' },
                { id: 'colombian', name: 'Colombienne' },
                { id: 'croatian', name: 'Croate' },
                { id: 'czech', name: 'Tch√®que' },
                { id: 'danish', name: 'Danoise' },
                { id: 'dutch', name: 'N√©erlandaise' },
                { id: 'egyptian', name: '√âgyptienne' },
                { id: 'ethiopian', name: '√âthiopienne' },
                { id: 'fijian', name: 'Fidjienne' },
                { id: 'filipino', name: 'Philippienne' },
                { id: 'finnish', name: 'Finlandaise' },
                { id: 'french', name: 'Fran√ßaise' },
                { id: 'german', name: 'Allemande' },
                { id: 'ghanaian', name: 'Ghan√©enne' },
                { id: 'greek', name: 'Grecque' },
                { id: 'hungarian', name: 'Hongroise' },
                { id: 'icelandic', name: 'Islandaise' },
                { id: 'indian', name: 'Indienne' },
                { id: 'indonesian', name: 'Indon√©sienne' },
                { id: 'irish', name: 'Irlandaise' },
                { id: 'israeli', name: 'Isra√©lienne' },
                { id: 'italian', name: 'Italienne' },
                { id: 'ivorian', name: 'Ivoirienne' },
                { id: 'japanese', name: 'Japonaise' },
                { id: 'kenyan', name: 'K√©nyane' },
                { id: 'korean', name: 'Cor√©enne' },
                { id: 'lebanese', name: 'Libanaise' },
                { id: 'malagasy', name: 'Malgache' },
                { id: 'malaysian', name: 'Malaisienne' },
                { id: 'mexican', name: 'Mexicaine' },
                { id: 'moroccan', name: 'Marocaine' },
                { id: 'new-zealander', name: 'N√©o-z√©landaise' },
                { id: 'nigerian', name: 'Nig√©riane' },
                { id: 'norwegian', name: 'Norv√©gienne' },
                { id: 'peruvian', name: 'P√©ruvienne' },
                { id: 'polish', name: 'Polonaise' },
                { id: 'polynesian', name: 'Polyn√©sienne' },
                { id: 'portuguese', name: 'Portugaise' },
                { id: 'romanian', name: 'Roumaine' },
                { id: 'russian', name: 'Russe' },
                { id: 'samoan', name: 'Samoane' },
                { id: 'scottish', name: '√âcossaise' },
                { id: 'senegalese', name: 'S√©n√©galaise' },
                { id: 'singaporean', name: 'Singapourienne' },
                { id: 'south-african', name: 'Sud-africaine' },
                { id: 'spanish', name: 'Espagnole' },
                { id: 'swedish', name: 'Su√©doise' },
                { id: 'swiss', name: 'Suisse' },
                { id: 'tahitian', name: 'Tahitienne' },
                { id: 'thai', name: 'Tha√Ølandaise' },
                { id: 'tunisian', name: 'Tunisienne' },
                { id: 'turkish', name: 'Turque' },
                { id: 'ukrainian', name: 'Ukrainienne' },
                { id: 'venezuelan', name: 'V√©n√©zu√©lienne' },
                { id: 'vietnamese', name: 'Vietnamienne' }
            ],
            outfits: [
                { id: 'ankara', name: 'Tenue Ankara (wax africain)' },
                { id: 'ankara-crop', name: 'Crop top & jupe Ankara fendue' },
                { id: 'ao-dai', name: '√Åo d√†i vietnamien' },
                { id: 'ao-dai-transparent', name: '√Åo d√†i transparent' },
                { id: 'badroune', name: 'Badroune - robe traditionnelle avec d√©collet√© et taille marqu√©e' },
                { id: 'belly-dance', name: 'Tenue danse orientale (Moyen-Orient)' },
                { id: 'bikini', name: 'Bikini' },
                { id: 'bikini-br√©silien', name: 'Bikini br√©silien' },
                { id: 'bikini-string', name: 'Bikini string' },
                { id: 'body', name: 'Body' },
                { id: 'body-transparent', name: 'Body transparent' },
                { id: 'boubou', name: 'Boubou brod√©' },
                { id: 'bunadsbunad', name: 'Bunad (costume norv√©gien)' },
                { id: 'caftan', name: 'Caftan color√©' },
                { id: 'caftan-kabyle', name: 'Caftan kabyle moderne - version ajust√©e et d√©collet√©e' },
                { id: 'caftan-ouvert', name: 'Caftan ouvert sexy' },
                { id: 'cheongsam', name: 'Cheongsam (Qipao)' },
                { id: 'cheongsam-fendu', name: 'Cheongsam fendu haut' },
                { id: 'coconut-bra', name: 'Soutien-gorge coquillage/noix de coco' },
                { id: 'corset-baviere', name: 'Corset bavarois traditionnel' },
                { id: 'costume-carnaval', name: 'Costume de carnaval' },
                { id: 'dashiki', name: 'Dashiki color√©' },
                { id: 'dirndl', name: 'Dirndl (tenue bavaroise)' },
                { id: 'dirndl-d√©collet√©', name: 'Dirndl d√©collet√© plongeant' },
                { id: 'djellaba', name: 'Djellaba brod√©e' },
                { id: 'ensemble-satin', name: 'Ensemble satin' },
                { id: 'fio-dental', name: 'Fio dental (br√©silien minimal)' },
                { id: 'flamenco', name: 'Robe flamenco' },
                { id: 'flamenco-fendue', name: 'Robe flamenco fendue' },
                { id: 'folkdr√§kt', name: 'Folkdr√§kt (costume su√©dois)' },
                { id: 'gandoura-moderne', name: 'Gandoura moderne' },
                { id: 'grass-skirt', name: 'Jupe en fibres naturelles' },
                { id: 'greek-toga', name: 'Toge grecque drap√©e sexy' },
                { id: 'hanbok', name: 'Hanbok moderne' },
                { id: 'hanbok-crop', name: 'Hanbok moderne crop top' },
                { id: 'karakou', name: 'Karakou' },
                { id: 'kebaya', name: 'Kebaya (Indon√©sie/Malaisie)' },
                { id: 'kebaya-dentelle', name: 'Kebaya dentelle ajust√©' },
                { id: 'kente', name: 'Kente (tissage ghan√©en)' },
                { id: 'kente-moderne', name: 'Kente moderne court & ajust√©' },
                { id: 'kilt', name: 'Kilt √©cossais' },
                { id: 'kimono', name: 'Kimono color√©' },
                { id: 'kimono-court', name: 'Kimono court sexy' },
                { id: 'kokoshnik', name: 'Tenue avec kokoshnik' },
                { id: 'lamba', name: 'Lamba malgache' },
                { id: 'lamba-nou√©', name: 'Lamba nou√© sensuel' },
                { id: 'lederhosen', name: 'Lederhosen (short bavarois)' },
                { id: 'lehenga-choli', name: 'Lehenga choli court (Inde)' },
                { id: 'lingerie-dentelle', name: 'Lingerie dentelle' },
                { id: 'maillot-une-piece', name: 'Maillot une pi√®ce' },
                { id: 'nuisette', name: 'Nuisette' },
                { id: 'pareo', name: 'Par√©o polyn√©sien' },
                { id: 'pareo-nou√©', name: 'Par√©o nou√© bas' },
                { id: 'plumes-paillettes', name: 'Costume plumes & paillettes' },
                { id: 'samba-minimal', name: 'Tenue samba minimale (Br√©sil)' },
                { id: 'sari', name: 'Sari color√©' },
                { id: 'sari-ventre', name: 'Sari d√©voilant le ventre' },
                { id: 'sarafan', name: 'Sarafan (robe russe)' },
                { id: 'sevillana-corset', name: 'Sevillana avec corset (Espagne)' },
                { id: 'shweshwe', name: 'Shweshwe (tissu sud-africain)' },
                { id: 'takchita', name: 'Takchita festive' },
                { id: 'takchita-d√©collet√©e', name: 'Takchita d√©collet√©e moderne' },
                { id: 'tankini', name: 'Tankini' },
                { id: 'tapa', name: 'Tapa (tissu oc√©anien)' },
                { id: 'yukata', name: 'Yukata d\'√©t√©' },
                { id: 'yukata-ouvert', name: 'Yukata entrouvert' }
            ],
            cities: [
                { id: 'abidjan', name: 'Abidjan' },
                { id: 'accra', name: 'Accra' },
                { id: 'addis-ababa', name: 'Addis-Abeba' },
                { id: 'amsterdam', name: 'Amsterdam' },
                { id: 'antananarivo', name: 'Antananarivo' },
                { id: 'apia', name: 'Apia (Samoa)' },
                { id: 'athens', name: 'Ath√®nes' },
                { id: 'auckland', name: 'Auckland' },
                { id: 'bali', name: 'Bali' },
                { id: 'bangkok', name: 'Bangkok' },
                { id: 'barcelona', name: 'Barcelone' },
                { id: 'barranquilla', name: 'Barranquilla' },
                { id: 'beirut', name: 'Beyrouth' },
                { id: 'berlin', name: 'Berlin' },
                { id: 'brussels', name: 'Bruxelles' },
                { id: 'budapest', name: 'Budapest' },
                { id: 'buenos-aires', name: 'Buenos Aires' },
                { id: 'cairo', name: 'Le Caire' },
                { id: 'cape-town', name: 'Le Cap' },
                { id: 'casablanca', name: 'Casablanca' },
                { id: 'cologne', name: 'Cologne' },
                { id: 'copenhagen', name: 'Copenhague' },
                { id: 'dakar', name: 'Dakar' },
                { id: 'dublin', name: 'Dublin' },
                { id: 'dubrovnik', name: 'Dubrovnik' },
                { id: 'edinburgh', name: '√âdimbourg' },
                { id: 'geneva', name: 'Gen√®ve' },
                { id: 'helsinki', name: 'Helsinki' },
                { id: 'hong-kong', name: 'Hong Kong' },
                { id: 'istanbul', name: 'Istanbul' },
                { id: 'johannesburg', name: 'Johannesburg' },
                { id: 'kuala-lumpur', name: 'Kuala Lumpur' },
                { id: 'kyiv', name: 'Kiev' },
                { id: 'lagos', name: 'Lagos' },
                { id: 'lima', name: 'Lima' },
                { id: 'lisbon', name: 'Lisbonne' },
                { id: 'london', name: 'Londres' },
                { id: 'manila', name: 'Manila' },
                { id: 'marrakech', name: 'Marrakech' },
                { id: 'mcmurdo', name: 'Station McMurdo (Antarctique)' },
                { id: 'melbourne', name: 'Melbourne' },
                { id: 'miami', name: 'Miami' },
                { id: 'montreal', name: 'Montr√©al' },
                { id: 'moscow', name: 'Moscou' },
                { id: 'munich', name: 'Munich' },
                { id: 'nairobi', name: 'Nairobi' },
                { id: 'new-orleans', name: 'La Nouvelle-Orl√©ans' },
                { id: 'nice', name: 'Nice' },
                { id: 'osaka', name: 'Osaka' },
                { id: 'oslo', name: 'Oslo' },
                { id: 'papeete', name: 'Papeete (Tahiti)' },
                { id: 'prague', name: 'Prague' },
                { id: 'reykjavik', name: 'Reykjavik' },
                { id: 'rio', name: 'Rio de Janeiro' },
                { id: 'salvador', name: 'Salvador de Bahia' },
                { id: 'santiago', name: 'Santiago' },
                { id: 'seoul', name: 'S√©oul' },
                { id: 'singapore', name: 'Singapour' },
                { id: 'sochi', name: 'Sotchi' },
                { id: 'st-petersburg', name: 'Saint-P√©tersbourg' },
                { id: 'stockholm', name: 'Stockholm' },
                { id: 'suva', name: 'Suva (Fidji)' },
                { id: 'sydney', name: 'Sydney' },
                { id: 'tel-aviv', name: 'Tel-Aviv' },
                { id: 'tokyo', name: 'Tokyo' },
                { id: 'toronto', name: 'Toronto' },
                { id: 'trinidad', name: 'Port-of-Spain (Trinidad)' },
                { id: 'tunis', name: 'Tunis' },
                { id: 'venice', name: 'Venise' },
                { id: 'vienna', name: 'Vienne' },
                { id: 'vladivostok', name: 'Vladivostok' },
                { id: 'warsaw', name: 'Varsovie' },
                { id: 'wellington', name: 'Wellington' },
                { id: 'zurich', name: 'Zurich' }
            ],
            events: [
                { id: 'afropunk', name: 'Afropunk' },
                { id: 'athens-carnival', name: 'Carnaval d\'Ath√®nes' },
                { id: 'beach-party', name: 'Beach party' },
                { id: 'calabar', name: 'Carnaval de Calabar' },
                { id: 'cape-town-carnival', name: 'Carnaval du Cap' },
                { id: 'carnaval', name: 'Carnaval' },
                { id: 'carnival-of-cultures', name: 'Carnaval des Cultures (Berlin)' },
                { id: 'carthage', name: 'Festival de Carthage' },
                { id: 'chale-wote', name: 'Festival Chale Wote (Ghana)' },
                { id: 'cherry-blossom', name: 'Festival des cerisiers en fleurs' },
                { id: 'copenhagen-pride', name: 'Pride de Copenhague' },
                { id: 'cultural-fest', name: 'Festival culturel' },
                { id: 'diwali', name: 'Diwali (F√™te des lumi√®res)' },
                { id: 'donia', name: 'Donia (Festival de Nosy Be)' },
                { id: 'donauinselfest', name: 'Donauinselfest (Vienne)' },
                { id: 'durbar', name: 'Festival Durbar' },
                { id: 'edinburgh-fringe', name: 'Edinburgh Fringe Festival' },
                { id: 'famadihana', name: 'Famadihana (Retournement des morts)' },
                { id: 'fes-sacred', name: 'Festival de F√®s (Musique sacr√©e)' },
                { id: 'festival-opener', name: 'Opener Festival (Pologne)' },
                { id: 'glastonbury', name: 'Glastonbury Festival' },
                { id: 'gnaoua', name: 'Festival Gnaoua (Maroc)' },
                { id: 'heiva', name: 'Heiva i Tahiti' },
                { id: 'hibiscus', name: 'Festival Hibiscus (Fidji)' },
                { id: 'holi', name: 'Festival Holi' },
                { id: 'inti-raymi', name: 'Inti Raymi (P√©rou)' },
                { id: 'istanbul-biennial', name: 'Biennale d\'Istanbul' },
                { id: 'ivan-kupala', name: 'Ivan Kupala (Nuit de la Saint-Jean)' },
                { id: 'just-for-laughs', name: 'Juste pour rire (Montr√©al)' },
                { id: 'kaapse-klopse', name: 'Kaapse Klopse (Cape Minstrels)' },
                { id: 'kingsday', name: 'Jour du Roi (King\'s Day)' },
                { id: 'lagos-carnival', name: 'Carnaval de Lagos' },
                { id: 'lamu-festival', name: 'Festival culturel de Lamu' },
                { id: 'lantern-festival', name: 'Festival des lanternes' },
                { id: 'love-parade', name: 'Love Parade' },
                { id: 'mardi-gras-sydney', name: 'Mardi Gras de Sydney' },
                { id: 'maslenitsa', name: 'Maslenitsa (Semaine des cr√™pes)' },
                { id: 'meskel', name: 'Meskel (F√™te de la Croix)' },
                { id: 'midwinter', name: 'F√™te du Solstice d\'hiver (Antarctique)' },
                { id: 'midsummer', name: 'F√™te de la Saint-Jean (Midsommar)' },
                { id: 'montreal-jazz', name: 'Festival de Jazz de Montr√©al' },
                { id: 'music-festival', name: 'Festival de musique' },
                { id: 'new-year', name: 'Nouvel an asiatique' },
                { id: 'night-market', name: 'March√© de nuit' },
                { id: 'notting-hill', name: 'Carnaval de Notting Hill' },
                { id: 'nye', name: 'R√©veillon' },
                { id: 'oktoberfest', name: 'Oktoberfest (Munich)' },
                { id: 'panafest', name: 'Panafest' },
                { id: 'parade', name: 'D√©fil√© festif' },
                { id: 'pasifika', name: 'Festival Pasifika (Auckland)' },
                { id: 'pride', name: 'Pride' },
                { id: 'purim', name: 'Pourim (F√™te juive)' },
                { id: 'rijeka-carnival', name: 'Carnaval de Rijeka' },
                { id: 'saint-louis-jazz', name: 'Festival Jazz de Saint-Louis' },
                { id: 'samba', name: 'D√©fil√© de samba' },
                { id: 'santos-populares', name: 'Santos Populares (Lisbonne)' },
                { id: 'scarlet-sails', name: 'Nuit des Voiles √âcarlates' },
                { id: 'secret-solstice', name: 'Secret Solstice (Islande)' },
                { id: 'signal-festival', name: 'Signal Festival (Prague)' },
                { id: 'st-patricks', name: 'Saint-Patrick' },
                { id: 'street-parade', name: 'Street Parade (Zurich)' },
                { id: 'street-party', name: 'Street party' },
                { id: 'summer-fest', name: 'F√™te d\'√©t√©' },
                { id: 'summer-matsuri', name: 'Festival d\'√©t√© (Matsuri)' },
                { id: 'sziget', name: 'Festival Sziget (Budapest)' },
                { id: 'tango-festival', name: 'Festival de Tango (Buenos Aires)' },
                { id: 'teuila', name: 'Festival Teuila (Samoa)' },
                { id: 'thaipusam', name: 'Thaipusam' },
                { id: 'timitar', name: 'Festival Timitar (Maroc)' },
                { id: 'timkat', name: 'Timkat (√âpiphanie √©thiopienne)' },
                { id: 'tomorrowland', name: 'Tomorrowland' },
                { id: 'untold', name: 'Festival Untold (Roumanie)' },
                { id: 'vappu', name: 'Vappu (1er mai finlandais)' },
                { id: 'water-festival', name: 'Festival de l\'eau (Songkran)' },
                { id: 'white-nights', name: 'Nuits Blanches de Saint-P√©tersbourg' }
            ],
            character2: [
                { id: 'none', name: 'Aucun', icon: '‚àÖ' },
                { id: 'woman', name: 'Femme', icon: 'üë©' },
                { id: 'man', name: 'Homme', icon: 'üë®' }
            ],
            actions: [
                { id: 'arms-up', name: 'L√®ve les bras' },
                { id: 'blowing-kiss', name: 'Envoie un baiser' },
                { id: 'celebrating', name: 'C√©l√®bre' },
                { id: 'dancing', name: 'Danse' },
                { id: 'jumping', name: 'Saute de joie' },
                { id: 'laughing', name: 'Rit aux √©clats' },
                { id: 'posing', name: 'Pose pour la cam√©ra' },
                { id: 'smiling', name: 'Sourit joyeusement' },
                { id: 'spinning', name: 'Tourne sur elle-m√™me' },
                { id: 'throwing-confetti', name: 'Lance des confettis' },
                { id: 'walking', name: 'Marche avec confiance' },
                { id: 'waving', name: 'Fait signe de la main' }
            ],
            interactions: [
                { id: 'arm-around', name: 'Bras autour des √©paules' },
                { id: 'cheering', name: 'Font la f√™te ensemble' },
                { id: 'dancing', name: 'Dansent ensemble' },
                { id: 'holding-hands', name: 'Se tiennent la main' },
                { id: 'hugging', name: 'S\'enlacent' },
                { id: 'kissing', name: 'S\'embrassent' },
                { id: 'laughing', name: 'Rient ensemble' },
                { id: 'taking-selfie', name: 'Prennent un selfie' }
            ],
            makeup: [
                { id: 'body-paint', name: 'Body painting avec ombres et textures' },
                { id: 'ethnic-jewelry', name: 'Bijoux ethniques authentiques' },
                { id: 'face-jewels', name: 'Bijoux de visage appliqu√©s avec pr√©cision' },
                { id: 'face-paint', name: 'Peinture faciale avec d√©tails fins' },
                { id: 'festival-glitter', name: 'Paillettes festival appliqu√©es naturellement' },
                { id: 'flower-crown', name: 'Couronne de fleurs fra√Æches' },
                { id: 'flowers-hair', name: 'Fleurs fra√Æches dans les cheveux' },
                { id: 'headband', name: 'Bandeau ajust√© naturellement' },
                { id: 'necklaces', name: 'Colliers superpos√©s naturellement' },
                { id: 'none', name: 'Aucun' },
                { id: 'sunglasses', name: 'Lunettes de soleil avec reflets' },
                { id: 'temporary-tattoo', name: 'Tatouages temporaires r√©alistes' }
            ],
            hairstyles: [
                { id: 'braids', name: 'Tresses' },
                { id: 'dreadlocks', name: 'Dreadlocks' },
                { id: 'man-bun', name: 'Chignon haut' },
                { id: 'messy-bun', name: 'Chignon d√©coiff√©' },
                { id: 'mohawk', name: 'Mohawk/cr√™te' },
                { id: 'natural-flowing', name: 'Naturels flottants' },
                { id: 'ponytail', name: 'Queue de cheval' },
                { id: 'slicked-back', name: 'Plaqu√©s en arri√®re' },
                { id: 'space-buns', name: 'Space buns' },
                { id: 'undercut', name: 'Undercut' },
                { id: 'wet-look', name: 'Effet mouill√©' },
                { id: 'windblown', name: 'Au vent' }
            ],
            moments: [
                { id: 'afternoon', name: 'Apr√®s-midi ensoleill√©' },
                { id: 'dawn', name: 'Aurore' },
                { id: 'dusk', name: 'Cr√©puscule' },
                { id: 'golden-hour', name: 'Golden hour' },
                { id: 'midday', name: 'Plein midi' },
                { id: 'midnight', name: 'Minuit' },
                { id: 'morning', name: 'Matin√©e' },
                { id: 'night', name: 'Nuit √©toil√©e' },
                { id: 'sunset', name: 'Coucher de soleil' }
            ],
            weather: [
                { id: 'clear-sky', name: 'Ciel d√©gag√©' },
                { id: 'colorful-clouds', name: 'Nuages color√©s' },
                { id: 'hot', name: 'Chaleur intense' },
                { id: 'humid', name: 'Atmosph√®re humide tropicale' },
                { id: 'light-rain', name: 'L√©g√®re pluie festive' },
                { id: 'rainbow', name: 'Arc-en-ciel' },
                { id: 'sunny', name: 'Ensoleill√© √©clatant' }
            ],
            expressions: [
                { id: 'confident', name: 'Confiant' },
                { id: 'energetic', name: '√ânergique' },
                { id: 'euphoric', name: 'Euphorique' },
                { id: 'joyful', name: 'Joyeux & souriant' },
                { id: 'laughing', name: 'Riant aux √©clats' },
                { id: 'playful', name: 'Espi√®gle' },
                { id: 'relaxed', name: 'D√©tendu' },
                { id: 'seductive', name: 'S√©ducteur' },
                { id: 'sensual', name: 'Sensuel' },
                { id: 'wild', name: 'Sauvage & libre' }
            ],
            backgrounds: [
                { id: 'architecture', name: 'Architecture locale caract√©ristique floue' },
                { id: 'balloons-realistic', name: 'Ballons color√©s avec reflets r√©alistes' },
                { id: 'beach-blurred', name: 'Plage en arri√®re-plan avec bokeh' },
                { id: 'confetti-ground', name: 'Confettis au sol et volant naturellement' },
                { id: 'decorations', name: 'D√©corations color√©es accroch√©es naturellement' },
                { id: 'dense-crowd', name: 'Foule dense r√©aliste l√©g√®rement floue' },
                { id: 'flags-wind', name: 'Drapeaux flottant au vent' },
                { id: 'neon-signs', name: 'Enseignes n√©on avec halo lumineux' },
                { id: 'none', name: 'Standard' },
                { id: 'stage-lights', name: 'Sc√®ne musicale avec √©clairages professionnels' },
                { id: 'street-art', name: 'Murs avec street art authentique' }
            ],
            effects: [
                { id: 'bokeh', name: 'Bokeh lumineux naturel' },
                { id: 'confetti-falling', name: 'Confettis tombant naturellement en flou de mouvement' },
                { id: 'confetti-ground', name: 'Confettis au sol et dans l\'air, perspective r√©aliste' },
                { id: 'dust-particles', name: 'Particules de poussi√®re dans la lumi√®re' },
                { id: 'fireworks-sky', name: 'Feux d\'artifice explosant dans le ciel' },
                { id: 'glitter-realistic', name: 'Paillettes scintillantes r√©alistes floues' },
                { id: 'lens-flare', name: 'Lens flare soleil r√©aliste' },
                { id: 'light-trails', name: 'Tra√Æn√©es lumineuses longue exposition' },
                { id: 'motion-blur', name: 'Motion blur dynamique naturel' },
                { id: 'none', name: 'Aucun' },
                { id: 'petals-flying', name: 'P√©tales de fleurs volant au vent' },
                { id: 'rain-drops', name: 'Gouttes de pluie en mouvement naturel' },
                { id: 'smoke-natural', name: 'Fum√©e color√©e naturelle dispers√©e' },
                { id: 'soap-bubbles', name: 'Bulles de savon translucides r√©alistes' }
            ],
            aesthetics: [
                { id: 'afrohemian', name: 'Afrohemian (couleurs vives africaines)' },
                { id: 'golden-hour', name: 'Golden Hour (dor√©s chauds)' },
                { id: 'hygge', name: 'Hygge (tons chauds & cosy)' },
                { id: 'icy-blue', name: 'Icy Blue (bleus glac√©s)' },
                { id: 'jewel-tones', name: 'Jewel Tones (couleurs joyaux)' },
                { id: 'mint-coral', name: 'Mint & Coral (frais & chaud)' },
                { id: 'neon-cyberpunk', name: 'Neon Cyberpunk (n√©ons √©lectriques)' },
                { id: 'pastel-dreamy', name: 'Pastel Dreamy (pastels doux)' },
                { id: 'sunset-warm', name: 'Sunset Warm (oranges & roses)' },
                { id: 'tropical-bright', name: 'Tropical Bright (couleurs √©clatantes)' }
            ],
            framings: [
                { id: 'aerial-11', name: 'Vue a√©rienne plongeante (1:1 carr√©)' },
                { id: 'aerial-169', name: 'Vue a√©rienne plongeante (16:9)' },
                { id: 'close-up-11', name: 'Gros plan (1:1 carr√©)' },
                { id: 'close-up-916', name: 'Gros plan (9:16 vertical)' },
                { id: 'dutch-angle-11', name: 'Angle hollandais inclin√© 45¬∞ (1:1 carr√©)' },
                { id: 'dutch-angle-169', name: 'Angle hollandais inclin√© 45¬∞ (16:9)' },
                { id: 'full-body-11', name: 'Plan large full body (1:1 carr√©)' },
                { id: 'full-body-169', name: 'Plan large full body (16:9)' },
                { id: 'full-body-916', name: 'Plan large full body (9:16 vertical)' },
                { id: 'high-angle-169', name: 'Plong√©e (16:9)' },
                { id: 'low-angle-169', name: 'Contre-plong√©e dramatique (16:9)' },
                { id: 'low-angle-916', name: 'Contre-plong√©e (9:16 vertical)' },
                { id: 'medium-shot-169', name: 'Plan am√©ricain (16:9)' },
                { id: 'medium-shot-916', name: 'Plan am√©ricain (9:16 vertical)' },
                { id: 'over-shoulder-169', name: 'Par-dessus l\'√©paule (16:9)' },
                { id: 'portrait-11', name: 'Portrait rapproch√© (1:1 carr√©)' },
                { id: 'portrait-916', name: 'Portrait rapproch√© (9:16 vertical)' },
                { id: 'three-quarter-11', name: 'Vue de trois quarts (1:1 carr√©)' },
                { id: 'three-quarter-169', name: 'Vue de trois quarts (16:9)' },
                { id: 'wide-angle-169', name: 'Grand angle panoramique (16:9)' },
                { id: 'wide-angle-219', name: 'Grand angle cin√©ma (21:9)' },
                { id: 'zoom-dynamic-169', name: 'Zoom dynamique (16:9)' }
            ],
            ambiances: [
                { id: 'crowded', name: 'Foule en f√™te' },
                { id: 'energetic', name: '√ânergique' },
                { id: 'euphoric', name: 'Euphorique' },
                { id: 'festive', name: 'Festive & joyeuse' },
                { id: 'party', name: 'Ambiance de f√™te' },
                { id: 'romantic', name: 'Romantique' },
                { id: 'sunny', name: 'Ensoleill√©e' },
                { id: 'tropical', name: 'Tropicale' },
                { id: 'vibrant', name: 'Vibrante & color√©e' }
            ],
            styles: [
                { id: 'candid', name: 'Spontan√©' },
                { id: 'fashion', name: 'Photo de mode' },
                { id: 'lifestyle', name: 'Lifestyle' },
                { id: 'magazine', name: 'Magazine' },
                { id: 'photorealistic', name: 'Photor√©aliste' },
                { id: 'professional', name: 'Professionnel' },
                { id: 'street', name: 'Street photography' },
                { id: 'vibrant-colors', name: 'Couleurs vibrantes' }
            ]
        };

        const state = {
            character1: 'woman',
            nationality: 'algerian',
            nationalityMode: 'predefined',
            outfit: 'karakou',
            action: 'dancing',
            actionMode: 'predefined',
            city: 'alger',
            cityMode: 'predefined',
            event: 'carnaval',
            eventMode: 'predefined',
            character2: 'none',
            nationality2: 'algerian',
            nationality2Mode: 'predefined',
            outfit2: 'karakou',
            hairstyle2: 'natural-flowing',
            hairstyle2Mode: 'predefined',
            makeup2: 'none',
            makeup2Mode: 'predefined',
            expression2: 'joyful',
            interaction: 'holding-hands',
            makeup: 'none',
            makeupMode: 'predefined',
            hairstyle: 'natural-flowing',
            hairstyleMode: 'predefined',
            moment: 'afternoon',
            weather: 'sunny',
            expression: 'joyful',
            background: 'none',
            backgroundMode: 'predefined',
            effects: 'none',
            effectsMode: 'predefined',
            aesthetic: 'tropical-bright',
            aestheticMode: 'predefined',
            framing: 'full-body-169',
            framingMode: 'predefined',
            ambiance: 'vibrant',
            style: 'photorealistic'
        };

        function createCards(containerId, dataKey, stateKey) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            data[dataKey].forEach(item => {
                const card = document.createElement('div');
                card.className = 'card';
                if (state[stateKey] === item.id) {
                    card.classList.add('active');
                }
                
                card.innerHTML = `
                    ${item.icon ? `<div class="icon">${item.icon}</div>` : ''}
                    <div>${item.name}</div>
                `;
                
                card.onclick = () => {
                    state[stateKey] = item.id;
                    createCards(containerId, dataKey, stateKey);
                    
                    if (stateKey === 'character2') {
                        const hasSecondary = item.id !== 'none';
                        document.getElementById('interaction-section').style.display = hasSecondary ? 'block' : 'none';
                        document.getElementById('secondary-options').style.display = hasSecondary ? 'block' : 'none';
                    }
                    
                    generatePrompt();
                };
                
                container.appendChild(card);
            });
        }

        function toggleMode(section) {
            const buttons = event.target.parentElement.querySelectorAll('.toggle-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const isPredefined = event.target.textContent === 'Pr√©d√©fini';
            document.getElementById(`${section}-predefined`).classList.toggle('active', isPredefined);
            document.getElementById(`${section}-custom`).classList.toggle('active', !isPredefined);
            
            state[`${section}Mode`] = isPredefined ? 'predefined' : 'custom';
            generatePrompt();
        }

        function getNationality() {
            if (state.nationalityMode === 'custom') {
                const custom = document.getElementById('custom-nationality').value;
                return custom || 'alg√©rienne';
            }
            const nat = data.nationalities.find(n => n.id === state.nationality);
            return nat ? nat.name.toLowerCase() : 'alg√©rienne';
        }

        function getNationality2() {
            if (state.nationality2Mode === 'custom') {
                const custom = document.getElementById('custom-nationality2').value;
                return custom || 'alg√©rienne';
            }
            const nat = data.nationalities.find(n => n.id === state.nationality2);
            return nat ? nat.name.toLowerCase() : 'alg√©rienne';
        }

        function getHairstyle2() {
            if (state.hairstyle2Mode === 'custom') {
                const custom = document.getElementById('custom-hairstyle2').value;
                return custom || '';
            }
            const hairstyle = data.hairstyles.find(h => h.id === state.hairstyle2);
            return hairstyle ? hairstyle.name.toLowerCase() : '';
        }

        function getMakeup2() {
            if (state.makeup2Mode === 'custom') {
                const custom = document.getElementById('custom-makeup2').value;
                return custom || '';
            }
            if (state.makeup2 === 'none') return '';
            const makeup = data.makeup.find(m => m.id === state.makeup2);
            return makeup ? makeup.name.toLowerCase() : '';
        }

        function getCity() {
            if (state.cityMode === 'custom') {
                const custom = document.getElementById('custom-city').value;
                return custom || 'Alger';
            }
            const city = data.cities.find(c => c.id === state.city);
            return city ? city.name : 'Alger';
        }

        function getEvent() {
            if (state.eventMode === 'custom') {
                const custom = document.getElementById('custom-event').value;
                return custom || 'carnaval';
            }
            const evt = data.events.find(e => e.id === state.event);
            return evt ? evt.name.toLowerCase() : 'carnaval';
        }

        function getAction() {
            if (state.actionMode === 'custom') {
                const custom = document.getElementById('custom-action').value;
                return custom || 'danse';
            }
            const action = data.actions.find(a => a.id === state.action);
            return action ? action.name.toLowerCase() : 'danse';
        }

        function getMakeup() {
            if (state.makeupMode === 'custom') {
                const custom = document.getElementById('custom-makeup').value;
                return custom || '';
            }
            if (state.makeup === 'none') return '';
            const makeup = data.makeup.find(m => m.id === state.makeup);
            return makeup ? makeup.name.toLowerCase() : '';
        }

        function getHairstyle() {
            if (state.hairstyleMode === 'custom') {
                const custom = document.getElementById('custom-hairstyle').value;
                return custom || '';
            }
            const hairstyle = data.hairstyles.find(h => h.id === state.hairstyle);
            return hairstyle ? hairstyle.name.toLowerCase() : '';
        }

        function getBackground() {
            if (state.backgroundMode === 'custom') {
                const custom = document.getElementById('custom-background').value;
                return custom || '';
            }
            if (state.background === 'none') return '';
            const bg = data.backgrounds.find(b => b.id === state.background);
            return bg ? bg.name.toLowerCase() : '';
        }

        function getEffects() {
            if (state.effectsMode === 'custom') {
                const custom = document.getElementById('custom-effects').value;
                return custom || '';
            }
            if (state.effects === 'none') return '';
            const effect = data.effects.find(e => e.id === state.effects);
            return effect ? effect.name.toLowerCase() : '';
        }

        function getAesthetic() {
            if (state.aestheticMode === 'custom') {
                const custom = document.getElementById('custom-aesthetic').value;
                return custom || '';
            }
            const aesthetic = data.aesthetics.find(a => a.id === state.aesthetic);
            return aesthetic ? aesthetic.name.toLowerCase() : '';
        }

        function getFraming() {
            if (state.framingMode === 'custom') {
                const custom = document.getElementById('custom-framing').value;
                return custom || '';
            }
            const framing = data.framings.find(f => f.id === state.framing);
            return framing ? framing.name.toLowerCase() : '';
        }

        function generatePrompt() {
            const parts = [];
            
            // Personnage principal
            const char1 = state.character1 === 'woman' ? 'Une femme' : 'Un homme';
            const nationality = getNationality();
            parts.push(`${char1} ${nationality}`);
            
            // Tenue
            const outfit = data.outfits.find(o => o.id === state.outfit);
            if (outfit) {
                parts.push(`en ${outfit.name.toLowerCase()}`);
            }
            
            // Coiffure
            const hairstyle = getHairstyle();
            if (hairstyle) {
                parts.push(`cheveux ${hairstyle}`);
            }
            
            // Maquillage & accessoires
            const makeup = getMakeup();
            if (makeup) {
                parts.push(`avec ${makeup}`);
            }
            
            // Expression
            const expression = data.expressions.find(e => e.id === state.expression);
            if (expression) {
                parts.push(`expression ${expression.name.toLowerCase()}`);
            }
            
            // Action
            const action = getAction();
            parts.push(action);
            
            // Personnage secondaire et interaction
            if (state.character2 !== 'none') {
                const char2 = state.character2 === 'woman' ? 'une femme' : 'un homme';
                const nationality2 = getNationality2();
                
                // Construction d√©tails personnage 2
                const char2Details = [];
                char2Details.push(`${char2} ${nationality2}`);
                
                // Tenue personnage 2
                const outfit2 = data.outfits.find(o => o.id === state.outfit2);
                if (outfit2) {
                    char2Details.push(`en ${outfit2.name.toLowerCase()}`);
                }
                
                // Coiffure personnage 2
                const hairstyle2 = getHairstyle2();
                if (hairstyle2) {
                    char2Details.push(`cheveux ${hairstyle2}`);
                }
                
                // Maquillage personnage 2
                const makeup2 = getMakeup2();
                if (makeup2) {
                    char2Details.push(`avec ${makeup2}`);
                }
                
                // Expression personnage 2
                const expression2 = data.expressions.find(e => e.id === state.expression2);
                if (expression2) {
                    char2Details.push(`expression ${expression2.name.toLowerCase()}`);
                }
                
                parts.push(`avec ${char2Details.join(', ')}`);
                
                // Interaction
                const interaction = data.interactions.find(i => i.id === state.interaction);
                if (interaction) {
                    parts.push(`ils ${interaction.name.toLowerCase()}`);
                }
            }
            
            // Lieu et √©v√©nement
            const city = getCity();
            const event = getEvent();
            parts.push(`dans les rues de ${city} pendant ${event}`);
            
            // Arri√®re-plan
            const background = getBackground();
            if (background) {
                parts.push(`arri√®re-plan: ${background}`);
            }
            
            // Moment de la journ√©e
            const moment = data.moments.find(m => m.id === state.moment);
            if (moment) {
                parts.push(moment.name.toLowerCase());
            }
            
            // M√©t√©o
            const weather = data.weather.find(w => w.id === state.weather);
            if (weather) {
                parts.push(weather.name.toLowerCase());
            }
            
            // Effets sp√©ciaux
            const effects = getEffects();
            if (effects) {
                parts.push(`effets: ${effects}`);
            }
            
            // Esth√©tique
            const aesthetic = getAesthetic();
            if (aesthetic) {
                parts.push(`esth√©tique ${aesthetic}`);
            }
            
            // Cadrage
            const framing = getFraming();
            if (framing) {
                parts.push(framing);
            }
            
            // Ambiance
            const ambiance = data.ambiances.find(a => a.id === state.ambiance);
            if (ambiance) {
                parts.push(`ambiance ${ambiance.name.toLowerCase()}`);
            }
            
            // Style
            const style = data.styles.find(s => s.id === state.style);
            if (style) {
                parts.push(`style ${style.name.toLowerCase()}`);
            }
            
            parts.push('haute qualit√©, 8K, d√©tails nets');
            
            const prompt = parts.join(', ') + '.';
            document.getElementById('prompt').textContent = prompt;
        }

        function randomize() {
            state.character1 = data.character1[Math.floor(Math.random() * data.character1.length)].id;
            state.nationality = data.nationalities[Math.floor(Math.random() * data.nationalities.length)].id;
            state.outfit = data.outfits[Math.floor(Math.random() * data.outfits.length)].id;
            state.action = data.actions[Math.floor(Math.random() * data.actions.length)].id;
            state.city = data.cities[Math.floor(Math.random() * data.cities.length)].id;
            state.event = data.events[Math.floor(Math.random() * data.events.length)].id;
            state.character2 = Math.random() > 0.5 ? 'none' : data.character2[Math.floor(Math.random() * 2) + 1].id;
            state.nationality2 = data.nationalities[Math.floor(Math.random() * data.nationalities.length)].id;
            state.outfit2 = data.outfits[Math.floor(Math.random() * data.outfits.length)].id;
            state.hairstyle2 = data.hairstyles[Math.floor(Math.random() * data.hairstyles.length)].id;
            state.makeup2 = data.makeup[Math.floor(Math.random() * data.makeup.length)].id;
            state.expression2 = data.expressions[Math.floor(Math.random() * data.expressions.length)].id;
            state.interaction = data.interactions[Math.floor(Math.random() * data.interactions.length)].id;
            state.makeup = data.makeup[Math.floor(Math.random() * data.makeup.length)].id;
            state.hairstyle = data.hairstyles[Math.floor(Math.random() * data.hairstyles.length)].id;
            state.moment = data.moments[Math.floor(Math.random() * data.moments.length)].id;
            state.weather = data.weather[Math.floor(Math.random() * data.weather.length)].id;
            state.expression = data.expressions[Math.floor(Math.random() * data.expressions.length)].id;
            state.background = data.backgrounds[Math.floor(Math.random() * data.backgrounds.length)].id;
            state.effects = data.effects[Math.floor(Math.random() * data.effects.length)].id;
            state.aesthetic = data.aesthetics[Math.floor(Math.random() * data.aesthetics.length)].id;
            state.framing = data.framings[Math.floor(Math.random() * data.framings.length)].id;
            state.ambiance = data.ambiances[Math.floor(Math.random() * data.ambiances.length)].id;
            state.style = data.styles[Math.floor(Math.random() * data.styles.length)].id;
            
            initializeCards();
            const hasSecondary = state.character2 !== 'none';
            document.getElementById('interaction-section').style.display = hasSecondary ? 'block' : 'none';
            document.getElementById('secondary-options').style.display = hasSecondary ? 'block' : 'none';
            generatePrompt();
        }

        function copyPrompt() {
            const prompt = document.getElementById('prompt').textContent;
            navigator.clipboard.writeText(prompt)
                .then(() => alert('‚úÖ Prompt copi√© dans le presse-papiers !'))
                .catch(err => alert('‚ùå Erreur lors de la copie'));
        }

        function initializeCards() {
            createCards('character1-grid', 'character1', 'character1');
            createCards('nationality-grid', 'nationalities', 'nationality');
            createCards('outfit-grid', 'outfits', 'outfit');
            createCards('action-grid', 'actions', 'action');
            createCards('city-grid', 'cities', 'city');
            createCards('event-grid', 'events', 'event');
            createCards('character2-grid', 'character2', 'character2');
            createCards('nationality2-grid', 'nationalities', 'nationality2');
            createCards('outfit2-grid', 'outfits', 'outfit2');
            createCards('hairstyle2-grid', 'hairstyles', 'hairstyle2');
            createCards('makeup2-grid', 'makeup', 'makeup2');
            createCards('expression2-grid', 'expressions', 'expression2');
            createCards('interaction-grid', 'interactions', 'interaction');
            createCards('makeup-grid', 'makeup', 'makeup');
            createCards('hairstyle-grid', 'hairstyles', 'hairstyle');
            createCards('moment-grid', 'moments', 'moment');
            createCards('weather-grid', 'weather', 'weather');
            createCards('expression-grid', 'expressions', 'expression');
            createCards('background-grid', 'backgrounds', 'background');
            createCards('effects-grid', 'effects', 'effects');
            createCards('aesthetic-grid', 'aesthetics', 'aesthetic');
            createCards('framing-grid', 'framings', 'framing');
            createCards('ambiance-grid', 'ambiances', 'ambiance');
            createCards('style-grid', 'styles', 'style');
        }

        // Initialisation
        window.onload = () => {
            initializeCards();
            generatePrompt();
        };
    </script>
</body>
</html>
