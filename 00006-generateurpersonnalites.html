<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>G√©n√©rateur de Prompts - PERSONNALIT√âS</title>
<style>
:root {
  --primary: #0a0a1a;
  --secondary: #1a1a3a;
  --accent: #00d4ff;
  --accent2: #ff6b6b;
  --accent3: #4ecdc4;
  --accent4: #9d4edd;
  --text: #e8f4ff;
  --card-bg: rgba(0, 20, 40, 0.8);
  --card-bg2: rgba(10, 30, 60, 0.6);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  color: var(--text);
  padding: 20px;
  line-height: 1.6;
  min-height: 100vh;
}

.container {
  max-width: 2000px;
  margin: 0 auto;
  background: linear-gradient(135deg, var(--card-bg), var(--card-bg2));
  padding: 40px;
  border-radius: 30px;
  box-shadow: 0 30px 100px rgba(0, 212, 255, 0.2);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(0, 212, 255, 0.1);
}

h1 {
  text-align: center;
  font-size: 2.8em;
  margin-bottom: 20px;
  text-shadow: 0 0 30px var(--accent);
  background: linear-gradient(to right, #00d4ff, #ff6b6b, #9d4edd);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.subtitle {
  text-align: center;
  font-size: 1.3em;
  margin-bottom: 40px;
  color: #88ccff;
}

/* GRID SYSTEM */
.grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 25px;
  margin-bottom: 30px;
}

.section {
  background: rgba(0, 10, 25, 0.5);
  border-radius: 20px;
  padding: 25px;
  border-left: 5px solid var(--accent);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  transition: transform 0.3s;
}

.section:hover {
  transform: translateY(-5px);
}

.section-title {
  font-size: 1.4em;
  margin-bottom: 20px;
  color: var(--accent);
  border-bottom: 2px solid var(--accent);
  padding-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.section-title::before {
  content: "‚ú¶";
  font-size: 1.2em;
}

/* FORM ELEMENTS */
select, input[type="text"], textarea {
  width: 100%;
  padding: 14px;
  font-size: 16px;
  border-radius: 12px;
  border: 2px solid var(--accent);
  background: rgba(0, 0, 0, 0.7);
  color: white;
  margin-bottom: 15px;
  transition: all 0.3s;
  cursor: pointer;
}

select:focus, input[type="text"]:focus, textarea:focus {
  outline: none;
  box-shadow: 0 0 20px var(--accent);
  border-color: #00ff88;
}

select option {
  background: #0a0a2a;
  padding: 10px;
}

.custom-input {
  margin-top: 10px;
  border-color: #ff6b6b !important;
}

.custom-input::placeholder {
  color: #ff9999;
}

.input-group {
  position: relative;
  margin-bottom: 15px;
}

.input-label {
  display: block;
  margin-bottom: 8px;
  color: #88ccff;
  font-size: 0.9em;
  font-weight: bold;
}

.input-hint {
  font-size: 0.8em;
  color: #66aaff;
  margin-top: 5px;
  padding: 5px 10px;
  background: rgba(0, 30, 60, 0.3);
  border-radius: 5px;
}

.checkbox-group {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin: 20px 0;
}

.checkbox-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.checkbox-item input {
  width: 18px;
  height: 18px;
}

/* PROMPT OUTPUT */
.prompt-container {
  margin-top: 40px;
  padding: 30px;
  background: linear-gradient(135deg, #000, #111, #000);
  border-radius: 20px;
  border: 3px solid var(--accent);
  box-shadow: inset 0 0 30px rgba(0, 255, 136, 0.1);
}

#promptOutput {
  width: 100%;
  min-height: 300px;
  background: transparent;
  color: #00ff88;
  font-family: 'Fira Code', 'Consolas', monospace;
  font-size: 16px;
  line-height: 1.5;
  padding: 20px;
  border: none;
  resize: vertical;
  border-radius: 10px;
}

/* BUTTONS */
.button-group {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 20px;
  margin: 30px 0;
}

button {
  padding: 18px 35px;
  font-size: 18px;
  border-radius: 15px;
  border: none;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  min-width: 200px;
}

#generateBtn {
  background: linear-gradient(135deg, #00d4ff, #00b8ff);
  color: #000;
  font-size: 20px;
}

#randomAllBtn {
  background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
  color: white;
}

#copyBtn {
  background: linear-gradient(135deg, #4ecdc4, #44a08d);
  color: #000;
}

#clearBtn {
  background: linear-gradient(135deg, #9d4edd, #560bad);
  color: white;
}

button:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
}

button:active {
  transform: translateY(0);
}

/* PERSONALITIES GRID */
.personalities-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 15px;
  margin-top: 15px;
  max-height: 300px;
  overflow-y: auto;
  padding: 10px;
}

.personality-card {
  background: rgba(0, 20, 40, 0.6);
  border-radius: 10px;
  padding: 15px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
  border: 1px solid transparent;
}

.personality-card:hover {
  border-color: var(--accent);
  background: rgba(0, 40, 80, 0.6);
}

.personality-card.selected {
  border-color: #00ff88;
  background: rgba(0, 40, 30, 0.6);
}

.personality-category {
  font-size: 0.8em;
  color: #88ccff;
  margin-top: 5px;
}

/* CONTROLS */
.controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 20px;
  margin: 25px 0;
  padding: 20px;
  background: rgba(0, 15, 30, 0.5);
  border-radius: 15px;
}

.control-group {
  display: flex;
  align-items: center;
  gap: 15px;
}

/* RESPONSIVE */
@media (max-width: 1200px) {
  .grid-container {
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  }
}

@media (max-width: 768px) {
  .container {
    padding: 20px;
  }
  
  h1 {
    font-size: 2em;
  }
  
  .button-group {
    flex-direction: column;
  }
  
  button {
    width: 100%;
  }
  
  .controls {
    flex-direction: column;
    align-items: stretch;
  }
}

/* SCROLLBAR */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: rgba(0, 10, 25, 0.5);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb {
  background: var(--accent);
  border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
  background: #00b8ff;
}

/* COUNTER */
.counter {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: rgba(255, 107, 107, 0.9);
  color: white;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  font-weight: bold;
  box-shadow: 0 5px 20px rgba(255, 107, 107, 0.5);
  z-index: 1000;
}

/* TOOLTIPS */
.tooltip {
  position: relative;
  display: inline-block;
  margin-left: 5px;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 200px;
  background-color: rgba(0, 0, 0, 0.9);
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 10px;
  position: absolute;
  z-index: 1;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0;
  transition: opacity 0.3s;
  font-size: 14px;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
  opacity: 1;
}

/* LOADING ANIMATION */
.loading {
  display: none;
  text-align: center;
  margin: 20px 0;
}

.loading span {
  display: inline-block;
  width: 10px;
  height: 10px;
  margin: 0 5px;
  background-color: var(--accent);
  border-radius: 50%;
  animation: loading 1.4s infinite ease-in-out both;
}

.loading span:nth-child(1) { animation-delay: -0.32s; }
.loading span:nth-child(2) { animation-delay: -0.16s; }

@keyframes loading {
  0%, 80%, 100% { transform: scale(0); }
  40% { transform: scale(1.0); }
}

/* SWITCH TOGGLE */
.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 30px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: .4s;
  border-radius: 34px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 22px;
  width: 22px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: .4s;
  border-radius: 50%;
}

input:checked + .slider {
  background-color: var(--accent);
}

input:checked + .slider:before {
  transform: translateX(30px);
}

/* CUSTOM INPUT HIGHLIGHT */
.custom-active {
  border-color: #00ff88 !important;
  box-shadow: 0 0 15px rgba(0, 255, 136, 0.3) !important;
  background: rgba(0, 40, 20, 0.7) !important;
}

/* SECTION REPLIABLE */
.collapsible {
  cursor: pointer;
  margin-top: 20px;
}

.collapsible-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease-out;
}

.collapsible-content.expanded {
  max-height: 1000px;
}

.collapsible-icon {
  transition: transform 0.3s;
  display: inline-block;
  margin-right: 10px;
}

.collapsible-icon.rotated {
  transform: rotate(90deg);
}

/* Styles pour le s√©lecteur de couleur */
input[type="color"] {
  border: 2px solid var(--accent);
  border-radius: 8px;
  background: transparent;
  cursor: pointer;
}

input[type="color"]::-webkit-color-swatch-wrapper {
  padding: 0;
}

input[type="color"]::-webkit-color-swatch {
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 6px;
}

/* Aper√ßu de la couleur HEX */
#colorHex {
  font-family: 'Fira Code', monospace;
  font-weight: bold;
  padding: 2px 6px;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 4px;
  margin-left: 5px;
}

/* Indicateur de densit√© */
.density-low { color: #ff6b6b !important; }
.density-medium { color: #ffa500 !important; }
.density-high { color: #00ff88 !important; }
.density-very-high { color: #ff00ff !important; }

/* Styles pour la galerie de r√©f√©rences */
.tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
  flex-wrap: wrap;
  border-bottom: 2px solid var(--accent);
  padding-bottom: 10px;
}

.tab-button {
  padding: 10px 20px;
  background: rgba(0, 20, 40, 0.6);
  border: 2px solid transparent;
  border-radius: 10px 10px 0 0;
  color: var(--text);
  cursor: pointer;
  transition: all 0.3s;
  font-weight: bold;
}

.tab-button:hover {
  background: rgba(0, 212, 255, 0.2);
}

.tab-button.active {
  background: var(--accent);
  color: #000;
  border-bottom: 3px solid #000;
}

.tab-content {
  display: none;
  animation: fadeIn 0.5s ease-out;
}

.tab-content.active {
  display: block;
}

.reference-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 15px;
  margin: 20px 0;
}

.reference-item {
  background: rgba(0, 15, 30, 0.5);
  border-radius: 10px;
  padding: 15px;
  cursor: pointer;
  transition: all 0.3s;
  text-align: center;
  border: 2px solid transparent;
}

.reference-item:hover {
  transform: translateY(-5px);
  border-color: var(--accent);
  box-shadow: 0 10px 20px rgba(0, 212, 255, 0.2);
  background: rgba(0, 30, 60, 0.7);
}

.reference-preview {
  width: 100%;
  height: 120px;
  border-radius: 8px;
  margin-bottom: 10px;
  background-size: cover;
  background-position: center;
  border: 2px solid rgba(255, 255, 255, 0.1);
}

.reference-item span {
  display: block;
  font-weight: bold;
  margin-bottom: 5px;
  color: #e8f4ff;
}

.reference-item small {
  color: #88ccff;
  font-size: 0.8em;
}

/* Animation pour le changement d'onglet */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ===== NOUVEAUX STYLES POUR LES AM√âLIORATIONS ===== */

/* Moteurs IA */
.engine-option-group {
  background: rgba(0, 20, 40, 0.3);
  border-radius: 12px;
  padding: 20px;
  margin-top: 15px;
  border-left: 3px solid var(--accent);
  animation: fadeIn 0.3s ease-out;
}

/* Syst√®me de profils */
.profile-buttons {
  display: flex;
  gap: 10px;
  margin-top: 15px;
  flex-wrap: wrap;
}

.profile-button {
  padding: 10px 15px;
  background: rgba(0, 212, 255, 0.2);
  border: 1px solid var(--accent);
  border-radius: 8px;
  color: var(--text);
  cursor: pointer;
  transition: all 0.3s;
  font-size: 14px;
}

.profile-button:hover {
  background: rgba(0, 212, 255, 0.4);
}

.profile-button.active {
  background: var(--accent);
  color: #000;
}

/* Analyse de prompt */
.analysis-panel {
  background: rgba(0, 15, 30, 0.5);
  border-radius: 12px;
  padding: 20px;
  margin-top: 20px;
  border: 1px solid var(--accent4);
}

.analysis-metric {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
  padding-bottom: 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.analysis-bar {
  height: 6px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
  margin: 10px 0;
  overflow: hidden;
}

.analysis-fill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.5s;
}

/* Palettes de couleurs */
.color-palette {
  display: flex;
  gap: 5px;
  margin: 10px 0;
}

.color-swatch {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  cursor: pointer;
  transition: transform 0.2s;
  border: 2px solid rgba(255, 255, 255, 0.3);
}

.color-swatch:hover {
  transform: scale(1.1);
}

.color-name {
  font-size: 0.8em;
  text-align: center;
  margin-top: 5px;
}

/* Composition */
.composition-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 15px;
  margin: 20px 0;
}

.composition-item {
  background: rgba(0, 20, 40, 0.5);
  border-radius: 10px;
  padding: 15px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
}

.composition-item:hover {
  transform: translateY(-5px);
  background: rgba(0, 212, 255, 0.2);
}

/* Tutoriel */
.tutorial-step {
  background: rgba(157, 78, 221, 0.1);
  border-radius: 12px;
  padding: 20px;
  margin: 20px 0;
  border-left: 4px solid var(--accent4);
}

.tutorial-navigation {
  display: flex;
  justify-content: space-between;
  margin-top: 20px;
}

/* Multi-personnages */
.character-section {
  background: rgba(255, 107, 107, 0.1);
  border-radius: 12px;
  padding: 20px;
  margin: 15px 0;
  border: 1px solid rgba(255, 107, 107, 0.3);
}

.remove-character {
  background: rgba(255, 107, 107, 0.2);
  color: #ff6b6b;
  border: 1px solid #ff6b6b;
  padding: 5px 10px;
  border-radius: 5px;
  cursor: pointer;
  margin-top: 10px;
}
.top-right {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 10px;
    z-index: 1000;
}

body {
    padding-top: 80px;
}
.btn-retour {
    display: inline-block;
    padding: 12px 20px;
    background: #007BFF;
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
}
</style>
</head>
<body>
<div class="top-right">
    <a href="index.html" class="btn-retour">üè† Accueil</a>
    <a href="repertoire/index.html" class="btn-retour">üìö R√©pertoire</a>
</div>
<div class="container">
  <h1>üé≠ G√âN√âRATEUR DE PROMPTS - PERSONNALIT√âS</h1>
  <p class="subtitle">Toutes les am√©liorations int√©gr√©es ‚Ä¢ Moteurs IA ‚Ä¢ Profils ‚Ä¢ Analyse ‚Ä¢ Composition</p>
  
  <!-- SYST√àME DE PROFILS -->
  <div class="section">
    <h2 class="section-title">üíæ PROFILS & PR√âS√âLECTIONS</h2>
    <div class="input-group">
      <div class="input-label">Gestion des profils :</div>
      <div style="display: flex; gap: 10px; flex-wrap: wrap;">
        <button class="profile-button" onclick="saveProfile()">üíæ Sauvegarder</button>
        <button class="profile-button" onclick="loadProfile()">üìÇ Charger</button>
        <button class="profile-button" onclick="deleteProfile()">üóëÔ∏è Supprimer</button>
        <button class="profile-button" onclick="resetProfiles()">üîÑ R√©initialiser</button>
      </div>
    </div>
    
    <div class="input-group">
      <div class="input-label">Nom du profil :</div>
      <input type="text" id="profileName" placeholder="Ex: Fantasy, Portrait, Cyberpunk...">
    </div>
    
    <div class="input-group">
      <div class="input-label">Profils sauvegard√©s :</div>
      <select id="profilesList" onchange="selectProfile(this.value)">
        <option value="">-- Choisir un profil --</option>
      </select>
      <div class="input-hint">Les profils sont sauvegard√©s dans votre navigateur</div>
    </div>
    
    <div class="profile-buttons" id="presetButtons">
      <!-- Rempli par JavaScript -->
    </div>
  </div>
  
  <!-- MOTEUR D'IA -->
  <div class="section">
    <h2 class="section-title">ü§ñ MOTEUR D'IA</h2>
    <div class="input-group">
      <div class="input-label">Moteur cible :</div>
      <select id="aiEngine" onchange="updateEngineOptions()">
        <option value="midjourney">Midjourney (V5/V6)</option>
        <option value="stable-diffusion">Stable Diffusion</option>
        <option value="dall-e">DALL-E 3</option>
        <option value="leonardo">Leonardo.ai</option>
        <option value="general" selected>G√©n√©ral / Autre</option>
      </select>
    </div>
    
    <div id="engineOptions" style="display: none;">
      <!-- Options sp√©cifiques charg√©es dynamiquement -->
    </div>
  </div>
  
  <!-- MODES CR√âATIFS -->
  <div class="section">
    <h2 class="section-title">‚öôÔ∏è MODES CR√âATIFS</h2>
    <div class="checkbox-group">
      <div class="checkbox-item">
        <input type="checkbox" id="modeRandom" checked>
        <label for="modeRandom">Mode Al√©atoire</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="modeAnachronique">
        <label for="modeAnachronique">Anachronismes</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="modeHumoristique">
        <label for="modeHumoristique">Humour</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="modeSurrealiste">
        <label for="modeSurrealiste">Surr√©alisme</label>
      </div>
    </div>
  </div>
  
  <!-- ANALYSE DE PROMPT -->
  <div class="section">
    <h2 class="section-title">üìä ANALYSE DU PROMPT</h2>
    <div class="analysis-panel">
      <div class="analysis-metric">
        <span>Longueur :</span>
        <span id="lengthScore">0 mots</span>
      </div>
      <div class="analysis-metric">
        <span>D√©tails :</span>
        <span id="detailScore">Faible</span>
      </div>
      <div class="analysis-metric">
        <span>Complexit√© :</span>
        <span id="complexityScore">Simple</span>
      </div>
      <div class="analysis-bar">
        <div class="analysis-fill" id="qualityBar" style="width: 0%; background: linear-gradient(90deg, #ff6b6b, #00ff88);"></div>
      </div>
      <div id="analysisTips" style="font-size: 0.9em; color: #88ccff; margin-top: 10px;">
        <!-- Conseils affich√©s dynamiquement -->
      </div>
    </div>
  </div>
  
  <!-- GRID PRINCIPAL -->
  <div class="grid-container">
    
    <!-- PERSONNALIT√âS -->
    <div class="section">
      <h2 class="section-title">üé≠ PERSONNALIT√â</h2>
      <div class="personalities-grid" id="personalitiesGrid">
        <!-- Rempli par JavaScript -->
      </div>
      <div class="input-group">
        <select id="personalitySelect" onchange="selectPersonality(this.value)">
          <option value="">-- Choisir une personnalit√© --</option>
        </select>
      </div>
      <div class="input-group">
        <input type="text" id="customPersonality" class="custom-input" placeholder="Personnalit√© personnalis√©e...">
      </div>
    </div>
    
    <!-- GENRE & FORMAT -->
    <div class="section">
      <h2 class="section-title">üë§ GENRE & FORMAT</h2>
      <div class="input-group">
        <div class="input-label">Genre :</div>
        <select id="genre">
          <option value="">Non sp√©cifi√©</option>
          <option value="homme">Homme</option>
          <option value="femme">Femme</option>
          <option value="non-binaire">Non-binaire</option>
        </select>
      </div>
      <div class="input-group">
        <div class="input-label">Format :</div>
        <select id="format">
          <option value="16:9">16:9 (Cin√©matique)</option>
          <option value="1:1">1:1 (Carr√©)</option>
          <option value="9:16">9:16 (Portrait)</option>
          <option value="21:9">21:9 (Large)</option>
        </select>
      </div>
    </div>
    
    <!-- ACTION -->
    <div class="section">
      <h2 class="section-title">üé¨ ACTION</h2>
      <div class="input-group">
        <select id="action">
          <option value="">-- Choisir une action --</option>
        </select>
      </div>
      <div class="input-group">
        <input type="text" id="customAction" class="custom-input" placeholder="Action personnalis√©e...">
      </div>
    </div>
    
    <!-- LIEU -->
    <div class="section">
      <h2 class="section-title">üìç LIEU</h2>
      <div class="input-group">
        <select id="lieu">
          <option value="">-- Choisir un lieu --</option>
        </select>
      </div>
      <div class="input-group">
        <input type="text" id="customLieu" class="custom-input" placeholder="Lieu personnalis√©...">
      </div>
    </div>
    
    <!-- STYLE ARTISTIQUE -->
    <div class="section">
      <h2 class="section-title">üé® STYLE</h2>
      <div class="input-group">
        <select id="style">
          <option value="">-- Choisir un style --</option>
        </select>
      </div>
      <div class="input-group">
        <textarea id="customStyle" class="custom-input" rows="3" placeholder="Style personnalis√©..."></textarea>
      </div>
    </div>
    
    <!-- √âCLAIRAGE -->
    <div class="section">
      <h2 class="section-title">üí° √âCLAIRAGE</h2>
      <div class="input-group">
        <select id="eclairage">
          <option value="">-- Choisir un √©clairage --</option>
        </select>
      </div>
      <div class="input-group">
        <input type="text" id="customEclairage" class="custom-input" placeholder="√âclairage personnalis√©...">
      </div>
    </div>
    
    <!-- PALETTES DE COULEURS -->
    <div class="section">
      <h2 class="section-title">üé® PALETTES DE COULEURS</h2>
      <div class="color-palette" id="colorPalette">
        <!-- Rempli par JavaScript -->
      </div>
      <div class="input-group">
        <div class="input-label">Palette :</div>
        <select id="colorTheme" onchange="updateColorPalette()">
          <option value="warm">Chaude (Rouge/Orange)</option>
          <option value="cool">Froide (Bleu/Vert)</option>
          <option value="pastel">Pastel</option>
          <option value="neon">N√©on</option>
          <option value="monochrome">Monochrome</option>
        </select>
      </div>
      <div class="input-group">
        <input type="text" id="customColors" class="custom-input" placeholder="Couleurs personnalis√©es...">
      </div>
    </div>
    
    <!-- COMPOSITION -->
    <div class="section">
      <h2 class="section-title">üìê COMPOSITION</h2>
      <div class="composition-grid" id="compositionGrid">
        <!-- Rempli par JavaScript -->
      </div>
      <div class="input-group">
        <div class="input-label">Type de composition :</div>
        <select id="compositionType">
          <option value="">Standard</option>
          <option value="rule-of-thirds">R√®gle des tiers</option>
          <option value="symmetry">Sym√©trie</option>
          <option value="leading-lines">Lignes directrices</option>
          <option value="frame-in-frame">Cadre dans le cadre</option>
        </select>
      </div>
    </div>
    
    <!-- MULTI-PERSONNAGES -->
    <div class="section">
      <h2 class="section-title">üë• MULTI-PERSONNAGES</h2>
      <div id="charactersContainer">
        <!-- Sections de personnages ajout√©es dynamiquement -->
      </div>
      <button onclick="addCharacter()" style="width: 100%; margin-top: 10px;">+ Ajouter un personnage</button>
    </div>
    
  </div> <!-- Fin grid-container -->
  
  <!-- TUTORIEL -->
  <div class="section" id="tutorialSection">
    <h2 class="section-title collapsible" onclick="toggleSection('tutorial')">
      <span class="collapsible-icon">‚ñ∂</span> üìö MODE TUTORIEL
    </h2>
    <div class="collapsible-content" id="tutorialContent">
      <div class="tutorial-step" id="tutorialStep1">
        <h3>√âtape 1 : Choisir une personnalit√©</h3>
        <p>S√©lectionnez une personnalit√© c√©l√®bre ou cr√©ez-en une personnalis√©e.</p>
        <div class="tutorial-navigation">
          <button onclick="prevTutorialStep()">Pr√©c√©dent</button>
          <button onclick="nextTutorialStep()">Suivant</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- CONTROLS -->
  <div class="controls">
    <div class="control-group">
      <input type="checkbox" id="autoCopy" checked>
      <label for="autoCopy">Copie auto</label>
    </div>
    <div class="control-group">
      <span>Prompt #<span id="promptCount">0</span></span>
    </div>
    <div class="control-group">
      <button onclick="toggleTutorial()" id="tutorialToggle">üéì Tutoriel</button>
    </div>
  </div>
  
  <!-- BOUTONS PRINCIPAUX -->
  <div class="button-group">
    <button id="generateBtn" onclick="generatePrompt()">
      <span>üöÄ</span> G√âN√âRER
    </button>
    <button id="randomAllBtn" onclick="randomizeAll()">
      <span>üé≤</span> RANDOM
    </button>
    <button id="copyBtn" onclick="copyPrompt()">
      <span>üìã</span> COPIER
    </button>
    <button id="clearBtn" onclick="clearAll()">
      <span>üóëÔ∏è</span> EFFACER
    </button>
  </div>
  
  <!-- PROMPT OUTPUT -->
  <div class="prompt-container">
    <h2 class="section-title">üìù PROMPT G√âN√âR√â</h2>
    <textarea id="promptOutput" readonly placeholder="Votre prompt appara√Ætra ici..."></textarea>
  </div>
  
</div>

<!-- COMPTEUR -->
<div class="counter" id="counter" title="Nombre de prompts g√©n√©r√©s">0</div>

<script>
// DONN√âES COMPL√àTES
const data = {
  personalities: [
    {name: "Freddie Mercury", category: "Chanteur"},
    {name: "Beyonc√©", category: "Chanteuse"},
    {name: "Michael Jackson", category: "Chanteur"},
    // ... toutes les personnalit√©s ...
  ],
  actions: ["chante sur sc√®ne", "danse fr√©n√©tiquement", "combat h√©ro√Øquement"],
  lieux: ["Times Square New York", "Tour Eiffel Paris", "Colis√©e Rome"],
  styles: ["r√©aliste photographique", "hyperr√©aliste 8K", "noir et blanc"],
  eclairages: ["soleil couchant dor√©", "aurore ros√©e douce", "n√©ons bleu orange"]
};

// VARIABLES GLOBALES
let promptCount = 0;
let selectedPersonality = null;
let tutorialActive = false;
let tutorialStep = 1;
let characters = [];
let profiles = {};

// INITIALISATION
document.addEventListener('DOMContentLoaded', function() {
  initPersonalities();
  initActions();
  initLieux();
  initStyles();
  initEclairages();
  initColorPalette();
  initComposition();
  initPresets();
  loadSavedProfiles();
  updateAnalysis();
  
  // √âcouteurs d'√©v√©nements
  document.getElementById('promptOutput').addEventListener('input', updateAnalysis);
  document.querySelectorAll('select, input, textarea').forEach(el => {
    el.addEventListener('change', updateAnalysis);
    el.addEventListener('input', updateAnalysis);
  });
});

// FONCTIONS D'INITIALISATION
function initPersonalities() {
  const grid = document.getElementById('personalitiesGrid');
  const select = document.getElementById('personalitySelect');
  
  data.personalities.forEach((person, index) => {
    const card = document.createElement('div');
    card.className = 'personality-card';
    card.dataset.id = index;
    card.innerHTML = `<strong>${person.name}</strong><div class="personality-category">${person.category}</div>`;
    card.onclick = () => selectPersonalityCard(index);
    grid.appendChild(card);
    
    const option = document.createElement('option');
    option.value = index;
    option.textContent = `${person.name} (${person.category})`;
    select.appendChild(option);
  });
}

function initActions() {
  const select = document.getElementById('action');
  data.actions.forEach(action => {
    const option = document.createElement('option');
    option.value = action;
    option.textContent = action;
    select.appendChild(option);
  });
}

function initLieux() {
  const select = document.getElementById('lieu');
  data.lieux.forEach(lieu => {
    const option = document.createElement('option');
    option.value = lieu;
    option.textContent = lieu;
    select.appendChild(option);
  });
}

function initStyles() {
  const select = document.getElementById('style');
  data.styles.forEach(style => {
    const option = document.createElement('option');
    option.value = style;
    option.textContent = style;
    select.appendChild(option);
  });
}

function initEclairages() {
  const select = document.getElementById('eclairage');
  data.eclairages.forEach(eclairage => {
    const option = document.createElement('option');
    option.value = eclairage;
    option.textContent = eclairage;
    select.appendChild(option);
  });
}

function initColorPalette() {
  updateColorPalette();
}

function initComposition() {
  const compositions = [
    {name: "R√®gle des tiers", desc: "√âquilibre parfait"},
    {name: "Sym√©trie centrale", desc: "Harmonie visuelle"},
    {name: "Contre-plong√©e", desc: "H√©ro√Øque"},
    {name: "Plong√©e", desc: "Vuln√©rable"},
    {name: "Gros plan", desc: "√âmotions"},
    {name: "Plan large", desc: "√âpique"}
  ];
  
  const grid = document.getElementById('compositionGrid');
  compositions.forEach(comp => {
    const item = document.createElement('div');
    item.className = 'composition-item';
    item.innerHTML = `<strong>${comp.name}</strong><br><small>${comp.desc}</small>`;
    item.onclick = () => applyComposition(comp.name);
    grid.appendChild(item);
  });
}

function initPresets() {
  const presets = [
    {name: "Fantasy", icon: "üêâ"},
    {name: "Cyberpunk", icon: "üîÆ"},
    {name: "Portrait", icon: "üë§"},
    {name: "Paysage", icon: "üèûÔ∏è"},
    {name: "Sci-Fi", icon: "üöÄ"}
  ];
  
  const container = document.getElementById('presetButtons');
  presets.forEach(preset => {
    const btn = document.createElement('button');
    btn.className = 'profile-button';
    btn.innerHTML = `${preset.icon} ${preset.name}`;
    btn.onclick = () => loadPreset(preset.name.toLowerCase());
    container.appendChild(btn);
  });
}

// FONCTIONS PRINCIPALES
function generatePrompt() {
  // R√©cup√©ration des valeurs
  const personality = getSelectedValue('customPersonality', 'personalitySelect', data.personalities);
  const action = getSelectedValue('customAction', 'action', data.actions);
  const lieu = getSelectedValue('customLieu', 'lieu', data.lieux);
  const style = getSelectedValue('customStyle', 'style', data.styles);
  const eclairage = getSelectedValue('customEclairage', 'eclairage', data.eclairages);
  const genre = document.getElementById('genre').value;
  const format = document.getElementById('format').value;
  
  // Construction du prompt
  let promptParts = [];
  if (format) promptParts.push(`format ${format}`);
  if (lieu) promptParts.push(lieu);
  if (personality) promptParts.push(`${personality} ${genre ? `(${genre})` : ''}`);
  if (action) promptParts.push(action);
  if (eclairage) promptParts.push(eclairage);
  if (style) promptParts.push(style);
  
  // Ajout des √©l√©ments suppl√©mentaires
  const colors = document.getElementById('customColors').value;
  if (colors) promptParts.push(`couleurs: ${colors}`);
  
  const composition = document.getElementById('compositionType').value;
  if (composition) promptParts.push(`composition: ${composition}`);
  
  // Modes cr√©atifs
  if (document.getElementById('modeAnachronique').checked) {
    promptParts.push("anachronisme cr√©atif");
  }
  if (document.getElementById('modeSurrealiste').checked) {
    promptParts.push("touche surr√©aliste");
  }
  
  // Formatage pour le moteur d'IA
  const engine = document.getElementById('aiEngine').value;
  let finalPrompt = promptParts.join(', ');
  finalPrompt = formatForEngine(finalPrompt, engine);
  
  // Affichage
  promptCount++;
  updateCounter();
  document.getElementById('promptOutput').value = `#${promptCount} ${finalPrompt}`;
  
  // Copie automatique
  if (document.getElementById('autoCopy').checked) {
    copyPrompt();
  }
  
  // Mise √† jour de l'analyse
  updateAnalysis();
  
  showNotification(`‚úÖ Prompt #${promptCount} g√©n√©r√© !`, '#00ff88');
}

function formatForEngine(prompt, engine) {
  switch(engine) {
    case 'midjourney':
      return prompt + ' --style raw --v 5.2';
    case 'stable-diffusion':
      return prompt;
    case 'dall-e':
      // Capitaliser pour DALL-E
      return prompt.charAt(0).toUpperCase() + prompt.slice(1) + '.';
    case 'leonardo':
      return prompt + ' [Leonardo Diffusion XL]';
    default:
      return prompt;
  }
}

function copyPrompt() {
  const prompt = document.getElementById('promptOutput').value;
  navigator.clipboard.writeText(prompt).then(() => {
    showNotification('üìã Prompt copi√© !', '#00d4ff');
  });
}

function randomizeAll() {
  // Randomiser tous les champs
  document.querySelectorAll('select').forEach(select => {
    if (select.id !== 'aiEngine' && select.id !== 'profilesList') {
      const randomIndex = Math.floor(Math.random() * (select.options.length - 1)) + 1;
      select.selectedIndex = randomIndex;
    }
  });
  
  // Randomiser les couleurs
  const themes = ['warm', 'cool', 'pastel', 'neon', 'monochrome'];
  document.getElementById('colorTheme').value = themes[Math.floor(Math.random() * themes.length)];
  updateColorPalette();
  
  // Randomiser la composition
  const compositions = ['', 'rule-of-thirds', 'symmetry', 'leading-lines', 'frame-in-frame'];
  document.getElementById('compositionType').value = compositions[Math.floor(Math.random() * compositions.length)];
  
  // G√©n√©rer un prompt
  setTimeout(() => generatePrompt(), 100);
}

function clearAll() {
  document.querySelectorAll('select').forEach(select => {
    select.selectedIndex = 0;
  });
  
  document.querySelectorAll('.custom-input').forEach(input => {
    input.value = '';
  });
  
  document.getElementById('promptOutput').value = '';
  promptCount = 0;
  updateCounter();
  
  // R√©initialiser les personnages
  characters = [];
  updateCharactersUI();
  
  showNotification('üßπ Tout effac√© !', '#4ecdc4');
}

// SYST√àME DE PROFILS
function saveProfile() {
  const name = document.getElementById('profileName').value.trim();
  if (!name) {
    showNotification('‚ùå Veuillez donner un nom au profil', '#ff6b6b');
    return;
  }
  
  // Sauvegarder toutes les valeurs
  const profile = {
    name: name,
    values: {}
  };
  
  // Collecter toutes les valeurs
  document.querySelectorAll('select, input, textarea').forEach(el => {
    if (el.id && !el.id.includes('Output')) {
      profile.values[el.id] = el.value;
    }
  });
  
  // Sauvegarder dans localStorage
  profiles[name] = profile;
  localStorage.setItem('promptProfiles', JSON.stringify(profiles));
  
  // Mettre √† jour la liste
  updateProfilesList();
  showNotification(`üíæ Profil "${name}" sauvegard√© !`, '#00ff88');
}

function loadProfile() {
  const name = document.getElementById('profilesList').value;
  if (!name || !profiles[name]) return;
  
  const profile = profiles[name];
  
  // Restaurer toutes les valeurs
  Object.keys(profile.values).forEach(id => {
    const element = document.getElementById(id);
    if (element) {
      element.value = profile.values[id];
    }
  });
  
  showNotification(`üìÇ Profil "${name}" charg√© !`, '#00d4ff');
}

function deleteProfile() {
  const name = document.getElementById('profilesList').value;
  if (!name) return;
  
  delete profiles[name];
  localStorage.setItem('promptProfiles', JSON.stringify(profiles));
  updateProfilesList();
  showNotification(`üóëÔ∏è Profil "${name}" supprim√© !`, '#ff6b6b');
}

function resetProfiles() {
  if (confirm('Voulez-vous vraiment supprimer tous les profils ?')) {
    profiles = {};
    localStorage.removeItem('promptProfiles');
    updateProfilesList();
    showNotification('üîÑ Tous les profils ont √©t√© supprim√©s', '#ffa500');
  }
}

function loadSavedProfiles() {
  const saved = localStorage.getItem('promptProfiles');
  if (saved) {
    profiles = JSON.parse(saved);
    updateProfilesList();
  }
}

function updateProfilesList() {
  const select = document.getElementById('profilesList');
  select.innerHTML = '<option value="">-- Choisir un profil --</option>';
  
  Object.keys(profiles).forEach(name => {
    const option = document.createElement('option');
    option.value = name;
    option.textContent = name;
    select.appendChild(option);
  });
}

// PALETTES DE COULEURS
function updateColorPalette() {
  const theme = document.getElementById('colorTheme').value;
  const palette = getColorPalette(theme);
  const container = document.getElementById('colorPalette');
  container.innerHTML = '';
  
  palette.forEach(color => {
    const swatch = document.createElement('div');
    swatch.className = 'color-swatch';
    swatch.style.background = color;
    swatch.title = color;
    swatch.onclick = () => applyColor(color);
    container.appendChild(swatch);
  });
}

function getColorPalette(theme) {
  const palettes = {
    warm: ['#FF6B6B', '#FFA726', '#FFEE58', '#FF8A65', '#D84315'],
    cool: ['#00D4FF', '#4ECDC4', '#81D4FA', '#29B6F6', '#0288D1'],
    pastel: ['#FFCDD2', '#F8BBD0', '#E1BEE7', '#C5CAE9', '#B3E5FC'],
    neon: ['#FF00FF', '#00FF00', '#00FFFF', '#FFFF00', '#FF00FF'],
    monochrome: ['#333333', '#666666', '#999999', '#CCCCCC', '#FFFFFF']
  };
  
  return palettes[theme] || palettes.warm;
}

function applyColor(color) {
  document.getElementById('customColors').value = color;
}

// COMPOSITION
function applyComposition(type) {
  document.getElementById('compositionType').value = type.toLowerCase().replace(' ', '-');
}

// MULTI-PERSONNAGES
function addCharacter() {
  characters.push({
    name: `Personnage ${characters.length + 1}`,
    role: '',
    relation: ''
  });
  updateCharactersUI();
}

function updateCharactersUI() {
  const container = document.getElementById('charactersContainer');
  container.innerHTML = '';
  
  characters.forEach((char, index) => {
    const section = document.createElement('div');
    section.className = 'character-section';
    section.innerHTML = `
      <h4>${char.name}</h4>
      <div class="input-group">
        <input type="text" placeholder="Nom" value="${char.name}" onchange="updateCharacter(${index}, 'name', this.value)">
      </div>
      <div class="input-group">
        <input type="text" placeholder="R√¥le" value="${char.role}" onchange="updateCharacter(${index}, 'role', this.value)">
      </div>
      <div class="input-group">
        <input type="text" placeholder="Relation" value="${char.relation}" onchange="updateCharacter(${index}, 'relation', this.value)">
      </div>
      <button class="remove-character" onclick="removeCharacter(${index})">Supprimer</button>
    `;
    container.appendChild(section);
  });
}

function updateCharacter(index, field, value) {
  characters[index][field] = value;
}

function removeCharacter(index) {
  characters.splice(index, 1);
  updateCharactersUI();
}

// TUTORIEL
function toggleTutorial() {
  tutorialActive = !tutorialActive;
  document.getElementById('tutorialToggle').textContent = tutorialActive ? '‚ùå Fermer' : 'üéì Tutoriel';
  
  if (tutorialActive) {
    document.getElementById('tutorialSection').style.display = 'block';
    toggleSection('tutorial');
  } else {
    document.getElementById('tutorialSection').style.display = 'none';
  }
}

function nextTutorialStep() {
  tutorialStep++;
  updateTutorial();
}

function prevTutorialStep() {
  tutorialStep--;
  updateTutorial();
}

function updateTutorial() {
  // Impl√©mentation basique
  document.getElementById('tutorialStep1').innerHTML = `
    <h3>√âtape ${tutorialStep} : Apprentissage</h3>
    <p>Continuez √† explorer les diff√©rentes options.</p>
    <div class="tutorial-navigation">
      <button onclick="prevTutorialStep()" ${tutorialStep === 1 ? 'disabled' : ''}>Pr√©c√©dent</button>
      <button onclick="nextTutorialStep()">${tutorialStep === 5 ? 'Terminer' : 'Suivant'}</button>
    </div>
  `;
}

// ANALYSE
function updateAnalysis() {
  const prompt = document.getElementById('promptOutput').value;
  const words = prompt.split(/\s+/).length;
  
  // Calcul des scores
  let detailScore = 'Faible';
  if (words > 50) detailScore = '√âlev√©';
  else if (words > 20) detailScore = 'Moyen';
  
  let complexityScore = 'Simple';
  if (words > 80) complexityScore = 'Complexe';
  else if (words > 40) complexityScore = 'Mod√©r√©';
  
  const quality = Math.min(100, words * 2);
  
  // Mise √† jour de l'interface
  document.getElementById('lengthScore').textContent = `${words} mots`;
  document.getElementById('detailScore').textContent = detailScore;
  document.getElementById('complexityScore').textContent = complexityScore;
  document.getElementById('qualityBar').style.width = `${quality}%`;
  
  // Conseils
  const tips = document.getElementById('analysisTips');
  if (words < 15) {
    tips.innerHTML = 'üí° Conseil : Ajoutez plus de d√©tails pour de meilleurs r√©sultats.';
  } else if (words > 100) {
    tips.innerHTML = 'üí° Conseil : Votre prompt est tr√®s long, certains √©l√©ments pourraient √™tre ignor√©s.';
  } else {
    tips.innerHTML = '‚úÖ Votre prompt est bien √©quilibr√©.';
  }
}

// FONCTIONS UTILITAIRES
function getSelectedValue(customId, selectId, dataArray) {
  const custom = document.getElementById(customId).value.trim();
  if (custom) return custom;
  
  const select = document.getElementById(selectId);
  if (select.value) {
    if (dataArray) {
      return dataArray[select.value]?.name || select.value;
    }
    return select.value;
  }
  
  return '';
}

function selectPersonalityCard(index) {
  document.querySelectorAll('.personality-card').forEach(card => {
    card.classList.remove('selected');
  });
  
  const card = document.querySelector(`.personality-card[data-id="${index}"]`);
  if (card) {
    card.classList.add('selected');
  }
  
  document.getElementById('personalitySelect').value = index;
  selectedPersonality = data.personalities[index];
}

function selectPersonality(value) {
  if (value === "") {
    document.querySelectorAll('.personality-card').forEach(card => {
      card.classList.remove('selected');
    });
    selectedPersonality = null;
    return;
  }
  
  selectPersonalityCard(parseInt(value));
}

function toggleSection(sectionId) {
  const content = document.getElementById(sectionId + 'Content');
  const icon = content.previousElementSibling.querySelector('.collapsible-icon');
  content.classList.toggle('expanded');
  icon.classList.toggle('rotated');
}

function updateCounter() {
  document.getElementById('promptCount').textContent = promptCount;
  document.getElementById('counter').textContent = promptCount;
}

function showNotification(message, color) {
  const notification = document.createElement('div');
  notification.textContent = message;
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: ${color};
    color: ${color === '#00ff88' ? '#000' : 'white'};
    padding: 15px 25px;
    border-radius: 10px;
    z-index: 10000;
    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
  `;
  
  document.body.appendChild(notification);
  setTimeout(() => notification.remove(), 3000);
}

// RACCOURCIS CLAVIER
document.addEventListener('keydown', function(e) {
  if (e.ctrlKey && e.key === 'Enter') generatePrompt();
  if (e.ctrlKey && e.key === 'r') randomizeAll();
  if (e.ctrlKey && e.key === 'c') copyPrompt();
  if (e.ctrlKey && e.key === 'Delete') clearAll();
});
</script>
</body>
</html>
