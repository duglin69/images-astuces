<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nano Banana - G√©n√©rateur de Prompts Expert</title>
    <style>
        :root {
            --bg-color: #0f172a;
            --card-bg: #1e293b;
            --text-color: #f1f5f9;
            --accent-primary: #3b82f6;
            --accent-surprise: #8b5cf6;
            --accent-success: #10b981;
            --accent-danger: #ef4444;
            --border-color: #334155;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 20px;
        }

        h1 { margin: 0; color: var(--accent-primary); }

        .generator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .field-box {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .field-box label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 0.9em;
            color: #94a3b8;
        }

        .custom-input {
    width: 100%;
    margin-top: 8px;
    padding: 8px;
    background: #0f172a;
    color: #38bdf8;
    border: 1px dashed #3b82f6;
    border-radius: 4px;
    box-sizing: border-box;
}

        select {
            width: 100%;
            padding: 10px;
            background: #0f172a;
            color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 30px 0;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            font-size: 0.85em;
        }

        .btn-gen { background: var(--accent-primary); color: white; }
        .btn-surprise { background: var(--accent-surprise); color: white; }
        .btn-copy { background: var(--accent-success); color: white; }
        .btn-reset { background: var(--accent-danger); color: white; }
        .btn-export { background: #64748b; color: white; }

        button:hover { filter: brightness(1.2); transform: translateY(-2px); }

        .output-section {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        textarea {
            width: 100%;
            height: 100px;
            background: #0f172a;
            color: #38bdf8;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            resize: vertical;
            margin-top: 10px;
        }

        h3 { margin-top: 20px; font-size: 1em; color: #94a3b8; }
    .top-right {
    position: fixed;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 10px;
    z-index: 1000;
}

body {
    padding-top: 80px;
}
.btn-retour {
    display: inline-block;
    padding: 12px 20px;
    background: #007BFF;
    color: white;
    text-decoration: none;
    border-radius: 8px;
    font-weight: 600;
}
        /* Container pour l'√©tiquette et ses contr√¥les (D√©s/Cadenas) */
.menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.btn-dice {
    background: #8b5cf6; /* Couleur violette comme le bouton Surprise */
    color: white;
    border: none;
    border-radius: 4px;
    padding: 2px 8px;
    cursor: pointer;
    font-size: 1em;
}

.lock-check {
    width: 16px;
    height: 16px;
    accent-color: #ef4444; /* Rouge pour le verrouillage */
    cursor: pointer;
}

/* Style pour la zone de notes */
#user-notes {
    width: 100%;
    height: 60px;
    background: #0f172a;
    color: #e2e8f0;
    border: 1px solid #334155;
    border-radius: 4px;
    padding: 10px;
}
    </style>
</head>
<body>
    <div class="top-right">
    <a href="index.html" class="btn-retour">üè† Accueil</a>
    <a href="repertoire/index.html" class="btn-retour">üìö R√©pertoire</a>
</div>

<header>
    <h1>G√©n√©rateur personnel 02</h1>
    <p>Architecture de Direction Artistique en 14 Points</p>
</header>

<div class="generator-grid">

<div class="field-box">
    <div class="menu-header">
        <label>01. SUJET PRINCIPAL</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_sujet_principal" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('sujet_principal')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="sujet_principal" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="Muses & Silhouettes">
            <option value="Ethereal woman with strawberry blonde hair, emerald green translucent ruffled gown, intricate lace bodice, high-fashion couture">La Muse √âmeraude (Robe vaporeuse)</option>
            <option value="Ghostly woman in a flowing translucent white gown, ethereal bridal silhouette, haunting beauty">La Mari√©e Spectrale (Silhouette blanche)</option>
            <option value="Maid in shiny black latex dress, white apron and garters, high-contrast fetish aesthetic">Soubrette en latex noir (Esth√©tique f√©tiche)</option>
            <option value="Shadowy grim reaper in a tattered black cloak, faceless hooded entity, dark presence">Faucheuse d'ombre (Entit√© encapuchonn√©e)</option>
            <option value="Gritty plumber in blue denim overalls, heavy leather utility belt, holding a large wrench, soot-stained face, cinematic lighting">Le Plombier (Bleu de travail et cl√© √† molette)</option>
            <option value="Astronaut in a vintage 1960s spacesuit, battered copper helmet, carrying a bouquet of wildflowers, surreal presence">L'Astronaute au bouquet (Surr√©alisme spatial)</option>
            <option value="Delicate ballerina in a glowing fiber-optic tutu, porcelain joints, performing a pirouette in a tattered environment">La Ballerine Cyber-Porcelaine</option>
            <option value="Master chef in a pristine white toque and apron, wearing a tactical gas mask, holding a glowing futuristic fruit">Le Chef au masque √† gaz</option>
            <option value="Massive Sumo wrestler in a majestic flowing silk kimono, eyes closed in meditation, surrounded by a faint mystical aura">Le Sumo en m√©ditation (Soie et s√©r√©nit√©)</option>
            <option value="Small Victorian child with a large wind-up key in their back, holding a translucent jellyfish balloon, haunting gaze">L'Enfant √† cl√© (Automate victorien)</option>
        </optgroup>
        <optgroup label="Cr√©atures & Personnages">
            <option value="Mechanical steampunk dragon, brass and copper scales, visible glowing blue pistons, intricate clockwork wings, steam exhaust, majestic pose">Dragon Steampunk M√©canique (Pistons et vapeur)</option>
            <option value="Cinematic Santa Claus, weathered face, velvet suit with fur trim, wise expression">P√®re No√´l Cin√©matique (Le "r√©el" traditionnel)</option>
            <option value="Large black panther, sleek muscular build, piercing amber eyes, predator grace">Panth√®re noire (Gr√¢ce sauvage)</option>
            <option value="Graceful forest doe, glowing crystalline antlers, collar made of blooming wildflowers, ethereal forest spirit">La Biche aux bois de cristal</option>
            <option value="Dapper penguin wearing a miniature black velvet tuxedo and monocle, holding a tiny silver-topped cane, sophisticated posture">Le Pingouin en smoking (Dandy polaire)</option>
            <option value="Human-sized white rabbit in a Victorian red waistcoat, holding a large glowing pocket watch, whimsical but slightly eerie">Le Lapin √† la montre (Vibe Alice / Steampunk)</option>
        </optgroup>
        <option value="custom">--- Custom (Saisir manuellement) ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>
    
<div class="field-box">
    <div class="menu-header">
        <label>01bis. SC√âNARIO</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_scenario" title="Bloquer">
            <button onclick="rollMenu('scenario')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="scenario" onchange="genPrompt()">
        <option value="">--- Simple (Sujet seul) ---</option>
        <option value="dynamic_duo">üë• Dynamic Duo (Face-√†-face)</option>
        <option value="surreal_trio">üë®‚Äçüë©‚Äçüë¶ Surreal Trio (3 entit√©s)</option>
        <option value="gothic_chaos">üåë Gothic Chaos (4 versions)</option>
        <option value="crystal_symphony">üíé Crystal Symphony (Verre √©clatant)</option>
        <option value="giant_micro">üêò Giant & Micro (Inversion de taille)</option>
        <option value="hologram_glitch">üëæ Hologram Glitch (Digital)</option>
        <option value="statue_museum">üèõÔ∏è Statue Museum (Marbre)</option>
        <option value="custom">--- Custom (Saisir manuellement) ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>
    
<div class="field-box">
    <div class="menu-header">
        <label>02. ACTION & POSE</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_action_pose" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('action_pose')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="action_pose" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="√ânergie & Mouvement">
            <option value="Aggressive scythe swing, dynamic motion blur on red blade, powerful execution pose">Attaque √† la faux (Flou de mouvement, pose d'ex√©cution)</option>
            <option value="Ethereal floating pose, dress fabric caught in wind, dynamic ruffled movement, suspended in air">L√©vitation √©th√©r√©e (Tissu emport√© par le vent)</option>
            <option value="Running through rain, splashing water, sense of urgency, motion blur on limbs">Course sous la pluie (Urgence et √©claboussures)</option>
        </optgroup>
        <optgroup label="Statique & Contemplation">
            <option value="Gazing longingly through a window, lost in thought, elegant profile, melancholic gaze">Regard m√©lancolique par la fen√™tre (Profil √©l√©gant)</option>
            <option value="Standing on a rocky cliff edge, overlooking a dark abyss, stoic witness pose">Sto√Øque sur une falaise (Dominant l'ab√Æme)</option>
            <option value="Sitting at a bistro table, leaning on hand, sophisticated boredom, direct eye contact">Assise au caf√© (Ennui sophistiqu√©, regard cam√©ra)</option>
        </optgroup>
        <optgroup label="Comportements Draconiques">
            <option value="Perched on a rooftop, mechanical tail coiling around a chimney, observing the city with glowing eyes">Perch√© sur un toit (Observation urbaine)</option>
            <option value="Majestic takeoff, huge clockwork wings unfolding, steam geysers erupting from back vents">D√©collage majestueux (D√©ploiement d'ailes et vapeur)</option>
            <option value="Diving through clouds, metallic body sleek and aerodynamic, wind-swept motion blur">Plong√©e dans les nuages (A√©rodynamisme et vitesse)</option>
            <option value="Breathing blue electric fire, sparking gears, destructive energy blast">Souffle de feu √©lectrique (√ânergie destructive)</option>
        </optgroup>
        <option value="custom">--- Custom ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

<div class="field-box">
    <div class="menu-header">
        <label>03. D√âTAILS, MATI√àRES & OBJETS</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_objets_matieres" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('objets_matieres')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="objets_matieres" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="Mati√®res & Textures (S'applique au sujet)">
            <option value="liquid metallic chrome skin, mercury-like reflections, fluid shifting shapes, high-gloss finish">M√©tal liquide / Chrome (Reflets mercure)</option>
            <option value="wearing luxurious iridescent silk, glowing fabric, soft flowing organza, ethereal shimmer">Soie iridescente (Reflets √©th√©r√©s)</option>
            <option value="wearing heavy crimson velvet, deep rich pile texture, opulent fabric folds">Velours cramoisi (Texture profonde)</option>
            <option value="covered in synthetic fiber-optic weave, glowing internal light, high-tech neon fabric">Fibre optique (Lumi√®re interne)</option>
        </optgroup>
        <optgroup label="R√©alisme Organique (Peau)">
            <option value="natural skin texture, visible pores and fine lines, unretouched look, hyper-realistic skin">Peau naturelle (Pores visibles)</option>
            <option value="porcelain skin with subtle freckles, soft matte finish, realistic complexion">Peau de porcelaine & taches de rousseur</option>
            <option value="highly detailed skin micro-textures, subsurface scattering, realistic sweat beads">Micro-textures & sueur</option>
        </optgroup>
        <optgroup label="Objets & Compagnons">
            <option value="holding a massive red-bladed scythe, dark eclipse halo behind head">Faux g√©ante & halo d'√©clipse</option>
            <option value="holding a basketball, electric blue sparks, cinematic sports equipment">Ballon de basket & √©tincelles</option>
            <option value="holding a vintage golf club, glowing energy trails">Club de golf & tra√Æn√©es d'√©nergie</option>
            <option value="with vintage porcelain espresso cup and saucer, ornate bistro furniture">Tasse espresso & mobilier bistro</option>
        </optgroup>
        <option value="custom">--- Custom (Saisir manuellement) ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

<div class="field-box">
    <div class="menu-header">
        <label>04. D√âCOR & LIEU</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_decor_lieu" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('decor_lieu')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="decor_lieu" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="Futuriste & Dystopique">
            <option value="Futuristic neon-lit skyscraper skyline, cyberpunk city towers reflecting on water, dense urban sprawl">Skyline cyberpunk n√©on (Reflets sur l'eau)</option>
            <option value="Dark coastal cave entrance, sharp basalt rocks, misty ocean view, crashing waves">Grotte c√¥ti√®re (Basalte noir et oc√©an brumeux)</option>
            <option value="Industrial warehouse, exposed pipes, rusted metal, dim flickering lights">Entrep√¥t industriel (Tuyaux expos√©s et m√©tal rouill√©)</option>
        </optgroup>
        <optgroup label="Lieux Classiques & Luxe">
            <option value="Belle √âpoque Parisian cafe, ornate mahogany wood paneling, sun-drenched bistro window">Caf√© parisien Belle √âpoque (Lambris d'acajou)</option>
            <option value="Vintage luxury train carriage, Orient Express aesthetic, velvet seats and brass details">Wagon Orient Express (Velours et laiton)</option>
            <option value="Grand opera house balcony, gold leaf carvings, heavy red velvet curtains">Balcon d'op√©ra (Dorures et rideaux de velours)</option>
        </optgroup>
        <option value="custom">--- Custom ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

<div class="field-box">
    <div class="menu-header">
        <label>05. √âPOQUE & CONTEXTE</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_epoque_contexte" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('epoque_contexte')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="epoque_contexte" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="Pass√© & Nostalgie">
            <option value="Cinematic 1950s glamour, Parisian Fin de Si√®cle vibe, vintage fashion editorial">Glamour 1950 (Vibe Fin de Si√®cle)</option>
            <option value="1920s Art Deco era, roaring twenties aesthetic, Great Gatsby style">Ann√©es 1920 (Art D√©co et Gatsby)</option>
            <option value="Ancient Sumerian Era, stone monoliths, primitive high-tech mysticism, ziggurat background">√àre Sum√©rienne (Mysticisme et Monolithes)</option>
        </optgroup>
        <optgroup label="Futur & Fantastique">
            <option value="90s cyberculture dawn, dystopian futuristic timeline, dark sci-fi fantasy crossover">Aube Cyberculture 90s (Dark Sci-Fi)</option>
            <option value="Post-apocalyptic wasteland, reclaimed by nature, silent world">Post-apocalyptique (Nature dominante)</option>
            <option value="Ultramodern minimalist future, sterile white surfaces, clean architectural lines">Futur minimaliste (Lignes blanches √©pur√©es)</option>
        </optgroup>
        <option value="custom">--- Custom (Saisir manuellement) ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

<div class="field-box">
    <div class="menu-header">
        <label>06. M√âT√âO & PH√âNOM√àNES</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_meteo_phenomenes" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('meteo_phenomenes')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="meteo_phenomenes" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="Atmosph√®re & Particules">
            <option value="Hazy morning mist, swirling indoor cigarette smoke, floating steam particles, soft atmospheric haze">Brume matinale et volutes de fum√©e</option>
            <option value="Electric blue corona discharge arcs, shimmering light trails, atmospheric smog, neon sparks">Arcs √©lectriques bleus et smog (√âtincelles n√©on)</option>
            <option value="Swirling autumn leaves, dust motes dancing in sunlight, floating embers">Feuilles tourbillonnantes et poussi√®re d'or</option>
        </optgroup>
        <optgroup label="M√©t√©o Forte">
            <option value="Heavy torrential rain reflecting city lights, wet asphalt sheen, puddles with neon ripples">Pluie torrentielle (Asphalte mouill√© et reflets)</option>
            <option value="Dense city fog with hazy volumetric light beams, limited visibility">Brouillard urbain √©pais (Rayons volum√©triques)</option>
            <option value="Rising manhole steam and hazy street exhaust, gritty urban atmosphere">Vapeur d'√©gout et gaz d'√©chappement (Urbain brute)</option>
        </optgroup>
        <option value="custom">--- Custom (Saisir manuellement) ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

<div class="field-box">
    <div class="menu-header">
        <label>07. AMBIANCE & MOOD</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_ambiance_mood" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('ambiance_mood')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="ambiance_mood" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="Surr√©alisme & Myst√®re">
            <option value="High-stakes surrealism, ominous cosmic event, high-tech meets dark magic vibe">Surr√©alisme mena√ßant (Magie noire & High-Tech)</option>
            <option value="Dreamy nostalgic vibe, ethereal atmosphere, floating memories, soft focus">Nostalgie onirique (Atmosph√®re vaporeuse)</option>
            <option value="Ominous silence, psychological tension, feeling of being watched">Tension psychologique (Silence mena√ßant)</option>
        </optgroup>
        <optgroup label="Humeurs Narratives">
            <option value="Melancholic cinematic romance, sophisticated solitude, timeless elegance">Romance m√©lancolique (√âl√©gance intemporelle)</option>
            <option value="Gritty industrial tension, cold isolation, raw emotional weight">Tension industrielle brute (Isolation froide)</option>
            <option value="Opulent decadence, lonely luxury, quiet sadness in a grand setting">D√©cadence opulente (Luxe solitaire)</option>
        </optgroup>
        <option value="custom">--- Custom (Saisir manuellement) ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

<div class="field-box">
    <div class="menu-header">
        <label>08. LUMINOSIT√â</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_luminosite_eclairage" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('luminosite_eclairage')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="luminosite_eclairage" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="Contrastes & N√©ons">
            <option value="Intense red neon city glow vs yellow crescent moonlight, electric blue flare accents">N√©on rouge vs Lune jaune (√âclairs bleus)</option>
            <option value="Cinematic chiaroscuro, deep shadows, single dramatic light source, high contrast">Clair-obscur cin√©matique (Ombres profondes)</option>
            <option value="Harsh overhead street lighting, long distorted shadows, urban noir light">√âclairage de rue cru (Ombres √©tir√©es)</option>
        </optgroup>
        <optgroup label="Lumi√®res Douces">
            <option value="Soft window side-lighting, golden hour interior glow, backlit translucent fabric">√âclairage lat√©ral doux (Heure dor√©e)</option>
            <option value="Volumetric sunbeams through dust motes, warm hazy atmosphere">Rayons de soleil volum√©triques</option>
            <option value="Bioluminescent glow, soft teal and purple ambient light, otherworldly luminescence">Lueur bioluminescente (Ambiance mystique)</option>
        </optgroup>
        <option value="custom">--- Custom (Saisir manuellement) ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

<div class="field-box">
    <div class="menu-header">
        <label>09. STYLE VISUEL</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_style_visuel" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('style_visuel')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="style_visuel" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="Moteurs de Rendu & CGI">
            <option value="Octane Render, cinematic 3D realism, physically based materials, Ray-tracing">Octane Render (Mat√©riaux physiques)</option>
            <option value="Blender Cycles render, path-traced lighting, realistic global illumination">Blender Cycles (Lumi√®re globale)</option>
            <option value="Unreal Engine 5, Lumen lighting, Nanite detail, photorealistic real-time">Unreal Engine 5 (Lumen & Nanite)</option>
            <option value="Arnold Render, professional cinematic lighting, movie-quality VFX">Arnold Render (Qualit√© Cin√©ma)</option>
            <option value="V-Ray render, architectural visualization style, clean precise lighting">V-Ray (Pr√©cision archi)</option>
            <option value="Redshift render, high-saturation cinematic look, clean textures">Redshift (Rendu rapide & satur√©)</option>
            <option value="Cinema 4D style, clean motion graphics, sharp 3D geometry">Cinema 4D (G√©om√©trie nette)</option>
            <option value="Marmoset Toolbag render, PBR materials, real-time lighting highlights">Marmoset Toolbag (PBR Game Art)</option>
            <option value="Ray Tracing enabled, realistic reflections, accurate light bounce">Ray Tracing (Reflets r√©els)</option>
            <option value="Professional 3D Render, high-quality CGI, polished finish">3D Render (Rendu 3D Standard)</option>
        </optgroup>
        <optgroup label="Photographie & Cin√©ma (Tes Classiques)">
            <option value="Analog film photography, 35mm grain, lush color grading, fashion editorial look">Photo Argentique (Grain 35mm & Look mode)</option>
            <option value="Vintage Kodachrome style, saturated colors, historical film look, 1950s aesthetic">Style Kodachrome (Couleurs satur√©es vintage)</option>
            <option value="Photorealistic, hyper-detailed, life-like textures, masterpiece quality">Photorealistic (Ultra-r√©alisme)</option>
        </optgroup>
        <optgroup label="Artistique & M√©diums">
            <option value="Masterpiece Oil Painting, rich impasto, textured canvas, classical style">Oil Painting (Peinture √† l'huile)</option>
            <option value="Sketch on oil canvas, visible underdrawing, raw artistic texture">Sketch oil canvas (Esquisse sur toile)</option>
            <option value="Detailed Pencil Sketch, graphite shading, hand-drawn paper texture">Pencil Sketch (Crayonn√© d√©taill√©)</option>
            <option value="Watercolor and ink sketch on textured paper, bleeding colors, artistic looseness">Aquarelle et encre (Couleurs diffuses)</option>
            <option value="Digital Painting, professional brushwork, vibrant colors, smooth transitions">Digital Painting (Peinture num√©rique)</option>
            <option value="Concept Art style, atmospheric storytelling, professional production art">Concept Art (Art de production)</option>
            <option value="Detailed Matte Painting, epic scale, photorealistic environment composite">Matte Painting (D√©cors √©piques)</option>
            <option value="ZBrush sculpt, high-detail clay texture, digital carving">ZBrush (Sculpture num√©rique)</option>
        </optgroup>
        <optgroup label="Styles Graphiques">
            <option value="Low Poly art style, sharp edges, flat shaded polygons, minimalist look">Low Poly (G√©om√©trie minimaliste)</option>
            <option value="Retro Pixel Art, 16-bit aesthetic, limited palette, dithered shading">Pixel Art (Esth√©tique 16-bit)</option>
            <option value="Clean Vector Art, flat colors, bold outlines, minimalist design">Vector Art (Design √©pur√©)</option>
            <option value="Stable Diffusion artistic style, unique AI-generated digital blend">Stable Diffusion (Style IA natif)</option>
        </optgroup>
        <option value="custom">--- Custom (Saisir manuellement) ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

<div class="field-box">
    <div class="menu-header">
        <label>10. STYLE N√âO-NOIR</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_style_neonoir" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('style_neonoir')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="style_neonoir" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="Palettes Iconiques">
            <option value="Cyber-teal and electric-orange dual lighting, sharp cinematic shadows">Bichromie bleu-sarcelle et orange √©lectrique</option>
            <option value="Deep purple and ultraviolet neon glow shadows, nocturnal cityscape">Ombres ultraviolettes et lueurs pourpres</option>
            <option value="Moody emerald and gold noir palette, heavy cigarette smoke, sophisticated decay">Palette noir √©meraude et or (Fum√©e et luxe)</option>
            <option value="High-contrast monochromatic noir with sharp Venetian blind shadow patterns">Monochrome noir intense (Stores v√©nitiens)</option>
        </optgroup>
        <optgroup label="Signatures Visuelles">
            <option value="Wet asphalt texture with neon liquid reflections, rainy street aesthetic">Asphalte mouill√© (Reflets n√©ons liquides)</option>
            <option value="Silhouette standing in a dark doorway, intense backlighting, mysterious aura">Silhouette en contre-jour (Entr√©e d'ombre)</option>
            <option value="Rising manhole steam and hazy street exhaust, gritty urban noir">Vapeur d'√©gout et gaz d'√©chappement (Urbain brut)</option>
        </optgroup>
        <option value="custom">--- Custom (Saisir manuellement) ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

<div class="field-box">
    <div class="menu-header">
        <label>11. OPTIQUE & TECHNIQUE</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_optique_camera" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('optique_camera')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="optique_camera" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="Photographie Pro">
            <option value="Professional DSLR photography, 85mm prime lens, f/1.8 aperture, sharp focus on eyes">Portrait DSLR (85mm, f/1.8, piqu√© net)</option>
            <option value="Full-frame mirrorless camera, 35mm wide-angle lens, deep depth of field, sharp edge-to-edge">Mirrorless Plein Format (35mm, nettet√© totale)</option>
            <option value="Macro photography, extreme close-up, hyper-detailed textures, narrow focus">Macro (Gros plan extr√™me, textures d√©taill√©es)</option>
        </optgroup>
        <optgroup label="Effets Cin√©ma">
            <option value="Anamorphic lens flares, shallow depth of field, creamy blurred background, cinematic bokeh">Lens flares anamorphiques (Bokeh cr√©meux)</option>
            <option value="35mm film grain, vintage lens character, slight chromatic aberration, nostalgic feel">Grain de film 35mm (Caract√®re vintage)</option>
            <option value="Long exposure, light trails, motion blur on fast movements, ethereal streaks">Pose longue (Tra√Æn√©es lumineuses et flou cin√©tique)</option>
        </optgroup>
        <option value="custom">--- Custom (Saisir manuellement) ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

<div class="field-box">
    <div class="menu-header">
        <label>12. SURR√âALISME & GLITCH</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_surrealisme_glitch" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('surrealisme_glitch')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="surrealisme_glitch" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="D√©fier la Physique">
            <option value="Zero gravity environment, floating debris, suspended liquid droplets">Z√©ro gravit√© (D√©bris et gouttes flottantes)</option>
            <option value="Impossible geometry, Escher-style architecture, non-euclidean spaces">G√©om√©trie impossible (Style Escher)</option>
            <option value="Objects melting into liquid, surreal distortion, dream-logic physics">Objets fondants et distorsions oniriques</option>
        </optgroup>
        <optgroup label="Anomalies Visuelles">
            <option value="Digital glitch art effects, pixel sorting, chromatic aberration streaks">Effets Glitch (Pixel sorting et tra√Æn√©es)</option>
            <option value="Double exposure effect, overlapping silhouettes, ghostly transparency">Double exposition (Silhouettes superpos√©es)</option>
            <option value="Shattered reality, mirror fragments floating in air, fractured view">R√©alit√© bris√©e (√âclats de miroir flottants)</option>
        </optgroup>
        <option value="custom">--- Custom (Saisir manuellement) ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

<div class="field-box">
    <div class="menu-header">
        <label>13. COMPOSITION & ANGLES</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_composition_angle" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('composition_angle')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="composition_angle" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="Angles de Vue">
            <option value="Low angle shot, looking up, heroic perspective, monumental scale">Contre-plong√©e (Perspective h√©ro√Øque)</option>
            <option value="Bird's eye view, high angle, looking down, miniature effect">Vue de dessus (Plong√©e totale)</option>
            <option value="Eye-level shot, intimate perspective, direct engagement">√Ä hauteur d'yeux (Perspective intime)</option>
            <option value="Dutch angle, tilted frame, sense of unease and disorientation">Angle hollandais (Cadre pench√©, malaise)</option>
        </optgroup>
        <optgroup label="Cadrage & Mise en sc√®ne">
            <option value="Wide cinematic shot, sprawling landscape, tiny subject in vast space">Plan large (Sujet minuscule dans l'immensit√©)</option>
            <option value="Extreme close-up, focusing on textures, macro detail, intense focus">Gros plan extr√™me (Focus textures)</option>
            <option value="Symmetry, centered composition, Wes Anderson style balance">Sym√©trie parfaite (Style Wes Anderson)</option>
            <option value="Rule of thirds composition, dynamic balance, off-center subject">R√®gle des tiers (Sujet d√©centr√©, √©quilibre)</option>
        </optgroup>
        <option value="custom">--- Custom (Saisir manuellement) ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

<div class="field-box">
    <div class="menu-header">
        <label>14. MES SIGNATURES (Effets cumul√©s)</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_signature_preset" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('signature_preset')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select name="signature_preset" class="p-select" onchange="genPrompt()">
        <option value="">-- Utiliser une recette sauvegard√©e --</option>
        <option value="highly detailed skin, subsurface scattering, cold studio lighting, high contrast, cinematic 8k render">‚ú® L'Effet Boucher (Peau & Lumi√®re)</option>
        <option value="warm ethereal glow, soft focus, dreamlike atmosphere, gold leaf accents, masterpiece lighting">üéÖ Le Style Papa No√´l (Chaleureux)</option>
        <option value="gritty oil painting, thick brushstrokes, heavy impasto, canvas texture, dark moody colors">üé® Peinture √† l'huile Textur√©e</option>
        <option value="dark gothic atmosphere, eerie macabre elegance, victorian horror, chiaroscuro lighting, hyper-detailed textures, moody and mysterious">üåë Signature : Alice Macabre (Gothique)</option>
        <option value="photorealistic, subsurface scattering, octane render, 8k, raytracing, sharp focus, professional studio lighting, hyper-realistic skin pores">üíé Signature : Rendu Cycles (R√©alisme Brut)</option>
        <option value="biomechanical, intricate organic patterns, H.R. Giger style, bioluminescent accents, polished metallic surfaces, alien aesthetic">üï∑Ô∏è Signature : Swedish Bio-Mech (Giger)</option>
        <option value="gritty industrial aesthetic, oily metallic textures, amber cinematic lighting, smoky atmosphere, retro-futuristic machinery, high contrast">‚öôÔ∏è Signature : Dieselpunk (Ocre & Acier)</option>
        <option value="rembrandt lighting, oil on canvas texture, deep shadows, warm glowing skin, classical art style, museum quality, rich pigments">üé® Signature : Ma√Ætre Flamand (Classique)</option>
        <option value="custom">--- Custom (Saisir manuellement) ---</option>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

<div class="field-box">
    <div class="menu-header">
        <label>15. FORMAT & QUALIT√â</label>
        <div class="menu-controls">
            <input type="checkbox" class="lock-check" name="lock_format_image" title="V√©rrouiller ce menu">
            <button onclick="rollMenu('format_image')" class="btn-dice">üé≤</button>
        </div>
    </div>
    <select class="p-select" name="format_image" onchange="genPrompt()">
        <option value="">--- Choisir ---</option>
        <optgroup label="Standards & Carr√©">
            <option value="1:1 aspect ratio, ultra-high resolution, 8k professional render">Format 1:1 (Carr√© parfait, 8K)</option>
            <option value="4:5 aspect ratio, hyper-detailed textures, 8k mastery">Format 4:5 (Portrait, D√©tails 8K)</option>
            <option value="2:3 aspect ratio, classic photography aspect ratio, sharp finish">Format 2:3 (Portrait classique, 8K)</option>
        </optgroup>
        <optgroup label="Cin√©matique">
            <option value="16:9 aspect ratio, widescreen HD, cinematic depth, ray-traced shadows">Format 16:9 (Widescreen HD, Ray-tracing)</option>
            <option value="21:9 aspect ratio, ultra-wide cinematic scope, epic landscape scale">Format 21:9 (Cin√©maScope, √âchelle √©pique)</option>
            <option value="32:9 aspect ratio, super ultrawide, immersive panoramic view">Format 32:9 (Super Ultrawide, Panoramique)</option>
        </optgroup>
        <optgroup label="Verticaux & R√©seaux">
            <option value="9:16 aspect ratio, fashion editorial quality, mobile-optimized scale">Format 9:16 (Story / TikTok / Mode)</option>
            <option value="5:8 aspect ratio, book cover ratio, artistic vertical composition">Format 5:8 (Couverture de livre, 8K)</option>
        </optgroup>
    </select>
    <input type="text" class="custom-input" placeholder="Ton texte ici..." style="display:none;" oninput="genPrompt()">
</div>

</div> 


<div class="field-box">
    <label>SEED (ADN de l'image : -1 pour al√©atoire)</label>
    <div style="display: flex; gap: 10px;">
        <input type="number" id="seed-input" value="-1" style="flex-grow: 1; padding: 10px; background: #0f172a; color: #10b981; border: 1px solid var(--border-color); border-radius: 4px; font-family: monospace;">
        <div class="seed-btns" style="display: flex; gap: 5px;">
            <button onclick="updateSeed(1)" class="btn-dice" style="background: #475569; padding: 5px 15px;">+1</button>
            <button onclick="updateSeed(-1)" class="btn-dice" style="background: #475569; padding: 5px 15px;">-1</button>
        </div>
    </div>
</div>

<div class="field-box" style="border: 1px solid var(--accent-primary);">
    <label style="color: #fbbf24; cursor: pointer; display: flex; align-items: center; gap: 10px;">
        <input type="checkbox" id="lock-manual" class="lock-check"> 
        ‚úçÔ∏è ACTIVER L'√âDITION MANUELLE (Emp√™che les menus d'effacer vos modifs)
    </label>
    
    <label style="margin-top: 15px;">NOTES DU DIRECTEUR (M√©mo pour votre fichier .txt)</label>
    <textarea id="user-notes" placeholder="Ex: Alice doit avoir un regard plus intense, assombrir le d√©cor..."></textarea>
</div>

<div class="button-group">
    <button onclick="genPrompt()" class="btn-gen">G√©n√©rer</button>
    <button onclick="surpriseMe()" class="btn-surprise">Surprise ‚ú®</button>
    <button onclick="copyBatch()" class="btn-gen" style="background: var(--accent-success);">Rafale de 4 üöÄ</button>
    <button onclick="copyToClipboard()" class="btn-copy">Copier üìã</button>
    <button onclick="exportPrompt()" class="btn-export">Export .txt üíæ</button>
    <button onclick="document.getElementById('import-file').click()" class="p-btn" style="background: #10b981; padding: 12px 24px; border-radius: 6px; color: white; border: none; font-weight: bold; cursor: pointer;">üìÇ Importer</button>
    <input type="file" id="import-file" style="display:none;" onchange="importPrompt(this)" accept=".txt">
    <button onclick="cleanPrompt()" class="btn-reset" style="background: #64748b;">Nettoyer üßπ</button>
    <button onclick="resetAll()" class="btn-reset">Reset üîÑ</button>
</div>

<div class="output-section">
    <h3>PROMPT POSITIF</h3>
    <textarea id="pos-out" placeholder="Le prompt g√©n√©r√© s'affichera ici..."></textarea>
    
    <h3>PROMPT N√âGATIF EXPERT</h3>
    <textarea id="neg-out" readonly></textarea>
</div>    
<script>
// --- 1. CONFIGURATION ET INITIALISATION ---
const SUPER_NEGATIVE = "signature, watermark, text, logo, username, (signature:1.2), deformed iris, deformed pupils, semi-realistic, cgi, 3d, render, sketch, cartoon, drawing, anime:1.4, close up, cropped, out of frame, worst quality, low quality, jpeg artifacts, ugly, duplicate, morbid, mutilated, extra fingers, mutated hands, poorly drawn hands, poorly drawn face, mutation, deformed, blurry, dehydrated, bad anatomy, bad proportions, extra limbs, cloned face, disfigured, gross proportions, malformed limbs, missing arms, missing legs, extra arms, extra legs, fused fingers, too many fingers, long neck";

window.onload = () => {
    document.getElementById('neg-out').value = SUPER_NEGATIVE;
};

// --- 2. LE C≈íUR : G√âN√âRATION DU PROMPT (Version Riche) ---
function genPrompt() {
    const lockManual = document.getElementById('lock-manual');
    if (lockManual && lockManual.checked) return;

    const selects = document.querySelectorAll('.p-select');
    const menu01 = document.getElementsByName('sujet_principal')[0];
    if (!menu01) return; // S√©curit√© si le menu 01 n'est pas trouv√©

    let parts = [];
    let mainSubject = "";
    
    // 1. GESTION DU SUJET PRINCIPAL
    const customSujetInput = menu01.parentNode ? menu01.parentNode.querySelector('.custom-input') : null;
    
    if (menu01.value === "custom") {
        if (customSujetInput) {
            customSujetInput.style.display = 'block';
            mainSubject = customSujetInput.value;
        }
    } else {
        if (customSujetInput) customSujetInput.style.display = 'none';
        mainSubject = menu01.value;
    }

    const allOptions = Array.from(menu01.options);
    const allSubjects = allOptions.filter(o => o.value !== "" && o.value !== "custom").map(o => o.value);
    const getRandomSujet = () => allSubjects.length > 0 ? allSubjects[Math.floor(Math.random() * allSubjects.length)] : "subject";

    // 2. BOUCLE SUR LES AUTRES MENUS
    selects.forEach(s => {
        if (s.name === "sujet_principal") return;

        const customInput = s.parentNode ? s.parentNode.querySelector('.custom-input') : null;

        if (s.value === "custom") {
            if (customInput) {
                customInput.style.display = 'block';
                if (customInput.value) parts.push(customInput.value);
            }
        } else {
            if (customInput) customInput.style.display = 'none';
            
            if (s.value) {
                if (s.name === "scenario") {
                    // Tes sc√©narios (inchang√©s)
                    if (s.value === "dynamic_duo") mainSubject = `${mainSubject} and ${getRandomSujet()}, face-off`;
                    else if (s.value === "surreal_trio") mainSubject = `${mainSubject} with ${getRandomSujet()} and ${getRandomSujet()}`;
                    else if (s.value === "gothic_chaos") mainSubject = `${mainSubject} surrounded by 3 gothic versions of ${getRandomSujet()}`;
                    else if (s.value === "crystal_symphony") mainSubject = `${mainSubject} next to entities made of glass`;
                    else if (s.value === "giant_micro") mainSubject = `Gigantic ${mainSubject} over tiny ${getRandomSujet()}`;
                    else if (s.value === "hologram_glitch") mainSubject = `${mainSubject} looking at holograms of ${getRandomSujet()}`;
                    else if (s.value === "statue_museum") mainSubject = `${mainSubject} in a gallery of statues of ${getRandomSujet()}`;
                } else {
                    parts.push(s.value);
                }
            }
        }
    });

    if (mainSubject) parts.unshift(mainSubject);
    const out = document.getElementById('pos-out');
    if (out) out.value = parts.join(", ");
}

// --- 3. LES D√âS (HASARD INDIVIDUEL PAR MENU) ---
function rollMenu(menuName) {
    const s = document.getElementsByName(menuName)[0];
    if (!s) return;
   // On enl√®ve le test 'opt.value !== ""' pour que le vide devienne une option possible
const validOptions = Array.from(s.options).filter(opt => opt.value !== "custom");
    if (validOptions.length > 0) {
        s.value = validOptions[Math.floor(Math.random() * validOptions.length)].value;
        genPrompt(); // Mise √† jour imm√©diate du texte
    }
}

// --- 4. LA SURPRISE (M√âLANGE GLOBAL + CADENAS) ---
function surpriseMe() {
    document.querySelectorAll('.p-select').forEach(s => {
        const lock = document.getElementsByName('lock_' + s.name)[0];
        // On respecte les cadenas et on ignore Signature/Format
        if ((lock && lock.checked) || s.name === "signature_preset" || s.name === "format_image") return;
               const validOptions = Array.from(s.options).filter(opt => opt.value !== "custom");
        if (validOptions.length > 0) {
            s.value = validOptions[Math.floor(Math.random() * validOptions.length)].value;
        }
    });
    document.getElementById('seed-input').value = "-1"; 
    genPrompt();
}

// --- 5. GESTION DU SEED ET RAFALE ---
function updateSeed(val) {
    let sInput = document.getElementById('seed-input');
    let sValue = parseInt(sInput.value);
    if (isNaN(sValue) || sValue < 0) sValue = Math.floor(Math.random() * 1000000);
    sInput.value = sValue + val;
    genPrompt();
}

function copyBatch() {
    const pos = document.getElementById('pos-out').value;
    const neg = document.getElementById('neg-out').value;
    let seed = parseInt(document.getElementById('seed-input').value);
    if (isNaN(seed) || seed < 0) seed = Math.floor(Math.random() * 1000000);

    let batch = "=== RAFALE DE 4 VARIATIONS ===\n\n";
    for (let i = 0; i < 4; i++) {
        batch += `PROMPT ${i+1} (SEED: ${seed + i})\n${pos}\n--neg ${neg}\n\n`;
    }
    navigator.clipboard.writeText(batch).then(() => alert("‚úÖ Rafale copi√©e !"));
}

// --- 6. EXPORT / IMPORT (Avec ta liste de labels compl√®te) ---
function exportPrompt() {
    const getT = (n) => {
        const e = document.getElementsByName(n)[0];
        return (e && e.selectedIndex > 0) ? e.options[e.selectedIndex].text : "---";
    };

    const seed = document.getElementById('seed-input').value;
    const notes = document.getElementById('user-notes')?.value || "Aucune note.";
    const pos = document.getElementById('pos-out').value;
    const neg = document.getElementById('neg-out').value;

    let content = `--- FICHE DE CR√âATION ---\n[SEED]: ${seed}\n[NOTES]: ${notes}\n-------------------------\n\n`;
    content += `[PROMPT POSITIF]:\n${pos}\n\n[PROMPT N√âGATIF]:\n${neg}\n\n[D√âTAILS]:\n`;

    const labels = {
        'sujet_principal': '01. SUJET', 'scenario': '01bis. SC√âNARIO', 'action_pose': '02. ACTION',
        'objets_matieres': '03. MATI√àRES', 'decor_lieu': '04. D√âCOR', 'epoque_contexte': '05. √âPOQUE',
        'meteo_phenomenes': '06. M√âT√âO', 'ambiance_mood': '07. AMBIANCE', 'luminosite_eclairage': '08. LUMI√àRE',
        'style_visuel': '09. STYLE', 'style_neonoir': '10. N√âO-NOIR', 'optique_camera': '11. OPTIQUE',
        'surrealisme_glitch': '12. GLITCH', 'composition_angle': '13. COMPOSITION',
        'signature_preset': '14. SIGNATURE', 'format_image': '15. FORMAT'
    };

    for (let key in labels) { content += `- ${labels[key]}: ${getT(key)}\n`; }

    const blob = new Blob([content], { type: 'text/plain' });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = `Export_Seed_${seed}.txt`;
    a.click();
}

function importPrompt(input) {
    const reader = new FileReader();
    reader.onload = function(e) {
        const text = e.target.result;
        const seedMatch = text.match(/\[SEED\]: (.*)/);
        if (seedMatch) document.getElementById('seed-input').value = seedMatch[1].trim();
        
        const notesMatch = text.match(/\[NOTES\]: ([\s\S]*?)\n-------------------------/);
        if (notesMatch && document.getElementById('user-notes')) document.getElementById('user-notes').value = notesMatch[1].trim();

        const lines = text.split('\n');
        lines.forEach(line => {
            if (line.startsWith('- ')) {
                const parts = line.substring(2).split(': ');
                const labelText = parts[1]?.trim();
                document.querySelectorAll('.p-select').forEach(s => {
                    Array.from(s.options).forEach((opt, i) => {
                        if (opt.text.trim() === labelText) s.selectedIndex = i;
                    });
                });
            }
        });
        genPrompt();
        alert("Fiche charg√©e ! üöÄ");
    };
    reader.readAsText(input.files[0]);
}

// --- 7. OUTILS CLASSIQUES ---
function copyToClipboard() {
    const pos = document.getElementById('pos-out').value;
    navigator.clipboard.writeText(pos).then(() => alert("‚úÖ Prompt copi√© !"));
}
function cleanPrompt() {
    document.querySelectorAll('.p-select').forEach(s => {
        const lock = document.getElementsByName('lock_' + s.name)[0];
        // Si le menu n'est pas verrouill√©, on le remet √† z√©ro
        if (!lock || !lock.checked) {
            s.selectedIndex = 0;
        }
    });
    genPrompt(); // On met √† jour le texte du prompt imm√©diatement
}
function resetAll() {
    document.querySelectorAll('.p-select').forEach(s => s.selectedIndex = 0);
    document.getElementById('seed-input').value = "-1";
    if (document.getElementById('user-notes')) document.getElementById('user-notes').value = "";
    document.getElementById('pos-out').value = "";
}
</script>
</body>
</html>























